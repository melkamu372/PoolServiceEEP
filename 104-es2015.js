(self.webpackChunknote=self.webpackChunknote||[]).push([[104],{23104:function(e,t,s){"use strict";s.r(t),s.d(t,{RequestModule:function(){return oe}});var i=s(61116),r=s(14969),n=s(11462),o=s(8361),a=s(25529),l=s(35366),u=s(77744),c=s(28302),p=s(65916),d=s(28451),h=s(94217),g=s(23625),q=s(49783),Z=s(14313),m=s(5590),f=s(89548),A=s(46326),T=s(13682);function y(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"span"),l.TgZ(1,"p-button",36),l.NdJ("click",function(){return l.CHM(e),l.oxw().indoorRequests()}),l.ALo(2,"translate"),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.s9C("label",l.lcZ(2,2,"indoorPoolRequests")),l.s9C("badge",e.indoorRCount)}}function x(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"span"),l.TgZ(1,"p-button",37),l.NdJ("click",function(){return l.CHM(e),l.oxw().fieldRequests()}),l.ALo(2,"translate"),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.s9C("label",l.lcZ(2,2,"fieldPoolRequests")),l.s9C("badge",e.fieldRCount)}}function b(e,t){1&e&&(l.TgZ(0,"tr",39),l.TgZ(1,"th"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"th"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"th"),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.TgZ(10,"th"),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.TgZ(13,"th"),l._uU(14),l.ALo(15,"translate"),l.qZA(),l.TgZ(16,"th"),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.TgZ(19,"th"),l._uU(20),l.ALo(21,"translate"),l.qZA(),l.TgZ(22,"th"),l._uU(23),l.ALo(24,"translate"),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.Oqu(l.lcZ(3,8,"requestReason")),l.xp6(3),l.Oqu(l.lcZ(6,10,"goto")),l.xp6(3),l.Oqu(l.lcZ(9,12,"requestType")),l.xp6(3),l.Oqu(l.lcZ(12,14,"requestTime")),l.xp6(3),l.Oqu(l.lcZ(15,16,"startTime")),l.xp6(3),l.Oqu(l.lcZ(18,18,"endTime")),l.xp6(3),l.Oqu(l.lcZ(21,20,"requester")),l.xp6(3),l.Oqu(l.lcZ(24,22,"state")))}function v(e,t){1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"th",40),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.hij(" ",l.lcZ(3,1,"noActivePoolRequest")," "))}function R(e,t){if(1&e&&(l.YNc(0,b,25,24,"tr",38),l.YNc(1,v,4,3,"tr",5)),2&e){const e=l.oxw();l.Q6J("ngIf",0!=e.request.length),l.xp6(1),l.Q6J("ngIf",0==e.request.length)}}function w(e,t){if(1&e&&(l.TgZ(0,"td"),l._uU(1),l.ALo(2,"date"),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.hij("",l.xi3(2,1,e.starttime,"MMM,dd/yyyy hh:mm:a")," ")}}function I(e,t){if(1&e&&(l.TgZ(0,"td"),l._uU(1),l.ALo(2,"date"),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Oqu(l.xi3(2,1,e.endtime,"MMM,dd/yyyy hh:mm:a"))}}function D(e,t){if(1&e&&(l.TgZ(0,"td"),l._uU(1),l.ALo(2,"date"),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.Oqu(l.xi3(2,1,e.starttime,"MMM,dd/yyyy"))}}function C(e,t){if(1&e&&(l.TgZ(0,"td"),l._uU(1),l.ALo(2,"date"),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.hij(" ",l.xi3(2,1,e.endtime,"MMM,dd/yyyy"),"")}}function N(e,t){1&e&&(l.ynx(0),l._uU(1,"Accepted"),l.BQk())}function S(e,t){if(1&e&&(l.ynx(0),l._uU(1,"Rejected "),l._UZ(2,"br"),l.TgZ(3,"b"),l._uU(4),l.ALo(5,"translate"),l.qZA(),l._uU(6),l.BQk()),2&e){const e=l.oxw(2).$implicit;l.xp6(4),l.Oqu(l.lcZ(5,2,"reason")),l.xp6(2),l.hij(": ",e.statechangeReason," ")}}function U(e,t){if(1&e&&l.YNc(0,S,7,4,"ng-container",42),2&e){const e=l.oxw().$implicit,t=l.MAs(21);l.Q6J("ngIf","rejected"==e.state)("ngIfElse",t)}}function M(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"span"),l._UZ(1,"p-menu",46,47),l.TgZ(3,"button",48),l.NdJ("click",function(t){return l.CHM(e),l.MAs(2).toggle(t)}),l.ALo(4,"translate"),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2).$implicit,t=l.oxw();l.xp6(1),l.Q6J("popup",!0)("model",t.getRowData(e)),l.xp6(2),l.s9C("label",l.lcZ(4,3,"requestResponse"))}}function J(e,t){if(1&e&&(l.TgZ(0,"label"),l._uU(1),l.qZA()),2&e){const e=l.oxw(2).$implicit;l.xp6(1),l.Oqu(e.state)}}function _(e,t){if(1&e&&(l.YNc(0,M,5,5,"span",42),l.YNc(1,J,2,1,"ng-template",null,45,l.W1O)),2&e){const e=l.MAs(2),t=l.oxw(2);l.Q6J("ngIf","FleetManager"==t.userRole||"PoolServiceAdministrator"==t.userRole)("ngIfElse",e)}}function k(e,t){if(1&e&&(l.TgZ(0,"tr",41),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.ALo(9,"date"),l.qZA(),l.YNc(10,w,3,4,"td",5),l.YNc(11,I,3,4,"td",5),l.YNc(12,D,3,4,"td",5),l.YNc(13,C,3,4,"td",5),l.TgZ(14,"td"),l._uU(15),l.qZA(),l.TgZ(16,"td"),l.YNc(17,N,2,0,"ng-container",42),l.YNc(18,U,1,2,"ng-template",null,43,l.W1O),l.YNc(20,_,3,2,"ng-template",null,44,l.W1O),l.qZA(),l.qZA()),2&e){const e=t.$implicit,s=l.MAs(19);l.xp6(2),l.Oqu(e.reason),l.xp6(2),l.Oqu(e.goto),l.xp6(2),l.Oqu(e.requesttype),l.xp6(2),l.hij(" ",l.xi3(9,11,e.requesteddate,"MMM,dd/yyyy"),""),l.xp6(2),l.Q6J("ngIf","indoor"==e.requesttype),l.xp6(1),l.Q6J("ngIf","indoor"==e.requesttype),l.xp6(1),l.Q6J("ngIf","field"==e.requesttype),l.xp6(1),l.Q6J("ngIf","field"==e.requesttype),l.xp6(2),l.hij(" ",e.requester.department.name," "),l.xp6(2),l.Q6J("ngIf","accepted"==e.state)("ngIfElse",s)}}function j(e,t){1&e&&l._UZ(0,"p-message",51)}function L(e,t){if(1&e&&(l.TgZ(0,"span"),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"p-calendar",49),l.YNc(5,j,1,0,"p-message",50),l.qZA()),2&e){const e=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,3,"date")),l.xp6(2),l.Q6J("showIcon",!0),l.xp6(1),l.Q6J("ngIf",!e.userform.controls.tripDate.valid&&e.userform.controls.tripDate.dirty)}}function O(e,t){1&e&&(l.TgZ(0,"span"),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"p-calendar",52),l.qZA()),2&e&&(l.xp6(2),l.Oqu(l.lcZ(3,2,"startTime")),l.xp6(2),l.Q6J("timeOnly",!0))}function Q(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"span"),l.TgZ(1,"input",53),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().defaultDate=t}),l.qZA(),l.TgZ(2,"label"),l._uU(3),l.ALo(4,"translate"),l.qZA(),l._UZ(5,"input",54),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngModel",e.defaultDate),l.xp6(2),l.Oqu(l.lcZ(4,2,"startDate"))}}function Y(e,t){1&e&&l._UZ(0,"p-message",57)}function E(e,t){if(1&e&&(l.TgZ(0,"div",55),l.YNc(1,Y,1,0,"p-message",56),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.userform.controls.startTime.errors.required)}}function P(e,t){1&e&&(l.TgZ(0,"span"),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"p-calendar",58),l.qZA()),2&e&&(l.xp6(2),l.Oqu(l.lcZ(3,2,"endTime")),l.xp6(2),l.Q6J("timeOnly",!0))}function B(e,t){1&e&&(l.TgZ(0,"span"),l.TgZ(1,"label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"input",59),l.qZA()),2&e&&(l.xp6(2),l.Oqu(l.lcZ(3,1,"endDate")))}function F(e,t){1&e&&l._UZ(0,"p-message",61)}function $(e,t){if(1&e&&(l.TgZ(0,"div",55),l.YNc(1,F,1,0,"p-message",60),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.userform.controls.endTime.errors.required)}}function H(e,t){1&e&&l._UZ(0,"p-message",62)}function V(e,t){1&e&&l._UZ(0,"p-message",63)}function G(e,t){1&e&&l._UZ(0,"p-message",64)}function z(e,t){1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"th"),l._UZ(2,"p-tableHeaderCheckbox"),l.qZA(),l.TgZ(3,"th"),l._uU(4),l.ALo(5,"translate"),l.qZA(),l.TgZ(6,"th"),l._uU(7),l.ALo(8,"translate"),l.qZA(),l.TgZ(9,"th"),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.TgZ(12,"th"),l._uU(13),l.ALo(14,"translate"),l.qZA(),l.TgZ(15,"th"),l._uU(16),l.ALo(17,"translate"),l.qZA(),l.qZA()),2&e&&(l.xp6(4),l.hij("",l.lcZ(5,5,"name")," "),l.xp6(3),l.Oqu(l.lcZ(8,7,"model")),l.xp6(3),l.hij("",l.lcZ(11,9,"plateNumber")," "),l.xp6(3),l.Oqu(l.lcZ(14,11,"seatCapacity")),l.xp6(3),l.hij(" ",l.lcZ(17,13,"assign"),""))}function W(e,t){1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"th",65),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.Oqu(l.lcZ(3,1,"noFreeVehicle")))}function K(e,t){if(1&e&&(l.YNc(0,z,18,15,"tr",5),l.YNc(1,W,4,3,"tr",5)),2&e){const e=l.oxw();l.Q6J("ngIf",0!=e.vehicle.length),l.xp6(1),l.Q6J("ngIf",0==e.vehicle.length)}}function X(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td"),l._UZ(2,"p-tableCheckbox",66),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.TgZ(9,"td"),l._uU(10),l.qZA(),l.TgZ(11,"td"),l.TgZ(12,"button",67),l.NdJ("click",function(){l.CHM(e);const s=t.$implicit;return l.oxw().assignAVehicle(s)}),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(2),l.Q6J("value",e),l.xp6(2),l.Oqu(e.name),l.xp6(2),l.Oqu(e.model),l.xp6(2),l.Oqu(e.platenumber),l.xp6(2),l.hij("",e.seatCapacity," ")}}const ee=function(){return{width:"50vw"}},te=function(){return{width:"35vw"}},se=function(){return{width:"30vw"}},ie=[{path:"",component:(()=>{class e{constructor(e,t,s,i,r){this.poolService=e,this.fb=t,this.sessionService=s,this.translateService=i,this.customValidator=r,this.newRequest={starttime:new Date,endtime:new Date,requesteddate:new Date,reason:"",goto:"",requesttype:"indoor",state:"request",statechangeReason:"request",changedby:"",requesterId:"",seendate:new Date,managerId:""},this.newPoolAssignment={requestID:"",busID:"",fleetManagerId:"",requesterName:"",requesterPhone:""},this.multiplePoolAssignment={requestID:"",bus:[],fleetManagerId:"",requesterName:"Melkamu Tessema",requesterPhone:"0945272183"},this.newVehicle={vehicleId:""},this.SmsContent={requestID:"",phone:"",body:"",status:"0"},this.iserror=!1,this.responseTitle="",this.responseDialog=!1,this.responseMesssage="",this.responseStyle="",this.vehicle=[],this.requestId="",this.fieldRCount=0,this.indoorRCount=0,this.defaultDate=new Date}ngOnInit(){this.rejectDisplay=!1,this.displayAccept=!1,this.loading=!1,this.display=!1,this.submitted=!1,this.user=this.sessionService.getItem("currentUser"),this.checkRole(),this.getRequest(),this.countRequest("indoor"),this.countRequest("field"),this.userform=this.fb.group({tripDate:new n.NI(this.defaultDate,n.kI.required),endTime:new n.NI("",n.kI.required),reason:new n.NI("",n.kI.required),place:new n.NI("",n.kI.required),startTime:new n.NI("",[n.kI.required]),requester:[null,[n.kI.required],this.customValidator.UserNameNotExistValidator.bind(this.customValidator)]}),this.rejectform=this.fb.group({reason:new n.NI("",n.kI.required)}),this.requestType="indoor",this.requestTypeList=[{name:"Indoor",code:"indoor"},{name:"Field",code:"field"}]}getRequest(){this.loading=!0,this.headerTitle="allpoolServiceRequests","FleetManager"==this.userRole||"PoolServiceAdministrator"==this.userRole?this.poolService.getRequest().then(e=>{this.request=e,this.loading=!1}):this.poolService.getRequest().then(e=>{this.request=e.filter(e=>e.manager.department.departmentId==this.user.user.department.departmentId),this.loading=!1})}countRequest(e){this.poolService.countRequestByType(e).then(t=>("indoor"==e?this.indoorRCount=t:this.fieldRCount=t,t))}fieldRequests(){this.loading=!0,this.headerTitle="fieldpoolServiceRequests",this.poolService.getRequestByType("field").then(e=>{this.request=e,this.loading=!1})}indoorRequests(){this.loading=!0,this.headerTitle="indoorpoolServiceRequests",this.poolService.getRequestByType("indoor").then(e=>{this.request=e,this.loading=!1})}AllRequests(){this.getRequest()}checkRole(){this.user.user.roles.map(e=>{this.userRole=e})}getRowData(e){return this.items=[{label:this.translateService.instant("accept"),icon:"pi pi-fw pi-check",command:t=>{this.getSelectedRequest(e)}},{label:this.translateService.instant("reject"),command:t=>{this.getRejectSelectedRequest(e)},icon:"pi pi-fw pi-times"}]}requestTypeChage(e){this.requestType=e.value.code,this.userform.reset(),this.defaultDate=new Date,this.display=!0,this.dialogTitle="registerPoolRequestForm"}getSelectedRequest(e){this.displayAccept=!0;let t=e.requesttype;this.newPoolAssignment.requesterName=e.requester.firstName+" "+e.requester.lastName,this.newPoolAssignment.requesterPhone=e.requester.phoneNumber,this.requestId=e.id,this.poolService.getCar().then(e=>{this.vehicle=e.filter(e=>"active"==e.status&&e.usedFor==t),this.loading=!1})}onClickRegisterRequest(){return e=this,void 0,s=function*(){this.submitted=!0;let e=this.compareDate(new Date(this.newRequests.starttime),new Date(this.newRequests.endtime));return this.compareDate(new Date,new Date(this.newRequests.starttime))?e?void(yield this.poolService.RegisterRequest(this.newRequests).subscribe(e=>{this.iserror=!1,this.responseStyle="success",this.responseDialog=!0,this.responseTitle="SUCCESS!!!",this.responseMesssage="Request information Registered successfully ",this.display=!1,this.submitted=!1},e=>{this.iserror=!0,this.responseTitle="Error!!!",this.responseDialog=!0,this.responseMesssage="",this.display=!1,this.responseStyle="error";for(const[t,s]of Object.entries(e))this.responseMesssage=this.responseMesssage+s;this.submitted=!1})):(this.iserror=!0,this.responseStyle="error",this.responseDialog=!0,this.responseTitle="Error!!!",this.responseMesssage="End Time Should Grater than from Start Time ",this.submitted=!1,!1):(this.iserror=!0,this.responseStyle="error",this.responseDialog=!0,this.responseTitle="Error!!!",this.responseMesssage="Starting Time Should be future Time ",this.submitted=!1,!1)},new((t=void 0)||(t=Promise))(function(i,r){function n(e){try{a(s.next(e))}catch(t){r(t)}}function o(e){try{a(s.throw(e))}catch(t){r(t)}}function a(e){var s;e.done?i(e.value):(s=e.value,s instanceof t?s:new t(function(e){e(s)})).then(n,o)}a((s=s.apply(e,[])).next())});var e,t,s}get newRequests(){let e=new Date(this.userform.controls.startTime.value),t=new Date(this.userform.controls.endTime.value);if("indoor"==this.requestType){e=new Date(this.userform.controls.tripDate.value),t=new Date(this.userform.controls.tripDate.value);let s=new Date(this.userform.controls.startTime.value),i=new Date(this.userform.controls.endTime.value);t.setHours(i.getHours()),t.setMinutes(i.getMinutes()),e.setHours(s.getHours()),e.setMinutes(s.getMinutes())}return this.newRequest.starttime=e,this.newRequest.endtime=t,this.newRequest.reason=this.userform.controls.reason.value,this.newRequest.goto=this.userform.controls.place.value,this.newRequest.changedby=this.user.user.userName,this.newRequest.requesttype=this.requestType,this.newRequest.managerId=this.user.user.id,this.newRequest.requesterId=this.userform.controls.requester.value,this.newRequest}getRejectSelectedRequest(e){this.rejectDisplay=!0,this.requestId=e.id,this.rejectDialogTitle="rejectReson",this.rejectedData=e}onClickRejectRequest(){this.newRequest.starttime=this.rejectedData.starttime,this.newRequest.endtime=this.rejectedData.endtime,this.newRequest.requesteddate=this.rejectedData.requesteddate,this.newRequest.reason=this.rejectedData.reason,this.newRequest.goto=this.rejectedData.goto,this.newRequest.requesttype=this.rejectedData.requesttype,this.newRequest.state="rejected",this.newRequest.statechangeReason=this.rejectform.controls.reason.value,this.newRequest.changedby=this.user.user.userName,this.newRequest.requesterId=this.rejectedData.requester.id,this.newRequest.managerId=this.user.user.id,this.rejectDisplay=!1,this.SmsContent.requestID=this.user.user.id,this.SmsContent.phone=this.rejectedData.requester.phoneNumber,this.SmsContent.body=`\u12e8\u1351\u120d \u1230\u122d\u126a\u1235 \u1325\u12eb\u1244\u12ce \u12c8\u12f0 ${this.rejectedData.goto} \u121b\u1235\u1270\u1293\u1308\u12f5 \u12a0\u120d\u1270\u127b\u1208\u121d \u1219\u1209 \u1218\u1228\u1303\u12c9\u1295 \u12f5\u1228 \u1308\u1339\u1295 \u12ed\u1218\u120d\u12a8\u1271\u1361\u1361 \u12a5\u1293\u1218\u1230\u1293\u1208\u1295 \u12e8\u12a2.\u12a4.\u1283 \u134d\u120a\u1275 \u121b\u1293\u1305\u1218\u1295\u1275 \u1262\u122e`,this.SendSms(this.SmsContent),this.updateRequestFunction(this.newRequest,this.rejectedData.id,"Suceesfully Completed")}assignAVehicle(e){this.displayAccept=!1,this.newPoolAssignment.busID=e.vehicleId,this.newPoolAssignment.requestID=this.requestId,this.newPoolAssignment.fleetManagerId=this.user.user.id,this.poolService.RegisterRequestAssignment(this.newPoolAssignment).subscribe(e=>{this.iserror=!1,this.responseStyle="success",this.responseDialog=!0,this.responseTitle="SUCCESS!!!",this.responseMesssage="Request Assigned successfully ",this.display=!1,this.submitted=!1},e=>{this.iserror=!0,this.responseTitle="Error!!!",this.responseDialog=!0,this.responseMesssage="",this.display=!1,this.responseStyle="error";for(const[t,s]of Object.entries(e))this.responseMesssage=this.responseMesssage+s;this.submitted=!1})}compareDate(e,t){return!(e>=t)}updateRequestFunction(e,t,s){this.poolService.updateRequest(e,t).subscribe(e=>{this.iserror=!1,this.responseStyle="success",this.responseDialog=!0,this.responseTitle="SUCCESS!!!",this.responseMesssage=s,this.display=!1,this.submitted=!1},e=>{this.iserror=!0,this.responseTitle="Error!!!",this.responseDialog=!0,this.responseMesssage="",this.display=!1,this.responseStyle="error";for(const[t,s]of Object.entries(e))this.responseMesssage=this.responseMesssage+s;this.submitted=!1})}SendSms(e){this.poolService.RegisterSms(e).subscribe(e=>{this.iserror=!1,this.responseStyle="success",this.responseTitle="SUCCESS!!!",this.display=!1},e=>{this.iserror=!0,this.responseTitle="Error!!!",this.responseDialog=!0,this.responseMesssage="",this.display=!1,this.responseStyle="error";for(const[t,s]of Object.entries(e))this.responseMesssage=this.responseMesssage+s})}vehicleSelectedData(){this.multiplePoolAssignment.fleetManagerId=this.user.user.id,this.multiplePoolAssignment.requestID=this.requestId,this.selecteData.map(e=>{this.multiplePoolAssignment.bus.push({vehicleId:e.vehicleId})}),this.displayAccept=!1,this.poolService.RegisterRequestMultipleAssignment(this.multiplePoolAssignment).subscribe(e=>{this.iserror=!1,this.responseStyle="success",this.responseDialog=!0,this.responseTitle="SUCCESS!!!",this.responseMesssage="Request Assigned successfully ",this.display=!1,this.submitted=!1},e=>{this.iserror=!0,this.responseTitle="Error!!!",this.responseDialog=!0,this.responseMesssage="",this.display=!1,this.responseStyle="error";for(const[t,s]of Object.entries(e))this.responseMesssage=this.responseMesssage+s;this.submitted=!1})}Okonclick(){this.responseDialog=!1,location.reload()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(o.q),l.Y36(n.qu),l.Y36(u.m),l.Y36(c.sK),l.Y36(a.q))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-request"]],decls:88,vars:101,consts:[[3,"visible","modal","visibleChange"],["type","button","pButton","","icon","pi pi-check",3,"label","click"],[1,"p-grid"],[1,"p-col-5"],[1,"p-col-2"],[4,"ngIf"],["optionLabel","name","placeholder","New Request",3,"options","onChange","click"],[1,"p-col-1"],["styleClass","p-button-success","badgeClass","p-badge-danger",3,"label","click"],["styleClass","p-datatable-gridlines",3,"value","autoLayout","loading","paginator","rows","responsive"],["pTemplate","header"],["pTemplate","body"],[3,"header","visible","transitionOptions","modal","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","p-grid"],[1,"p-field","p-col-12","p-md-12"],[1,"p-field","p-col-6","p-md-6"],["class","p-col-6",4,"ngIf"],["type","text","formControlName","place","pInputText","","required",""],["severity","error","text","Going place is required",4,"ngIf"],["type","text","formControlName","requester","pInputText","","required",""],["severity","error","text","Requester Id is required",4,"ngIf"],["severity","error","text","Requester Id is not exists if not registered please first register",4,"ngIf"],[1,"p-field","p-col-12"],["for","address"],["type","text","rows","4","formControlName","reason","pInputTextarea","","required",""],[1,"p-col-5","p-lg-offset-2"],["pButton","","type","button",1,"ui-button-raised",2,"width","70%",3,"label","disabled","click"],["pButton","","type","button",1,"ui-button-raised",2,"width","70%",3,"label","click"],[3,"header","visible","modal","visibleChange"],[2,"text-align","right"],["pButton","","pRipple","","icon","pi pi-check","label","Assign",1,"p-button-success","p-mr-2",3,"disabled","click"],[3,"value","paginator","rows","responsive","selection","selectionChange"],[1,"p-field","p-col-6"],["pButton","","type","button",1,"ui-button-raised",3,"label","disabled","click"],["pButton","",1,"ui-button-raised",3,"label","click"],["styleClass","p-button-success","badgeClass","p-badge-danger",3,"label","badge","click"],["styleClass","p-button-warning","badgeClass","p-badge-danger",3,"label","badge","click"],["class","header-row",4,"ngIf"],[1,"header-row"],["colspan","11",2,"text-align","center","color","red"],[1,"body-row"],[4,"ngIf","ngIfElse"],["reject",""],["else1",""],["elseBlock",""],["appendTo","body",3,"popup","model"],["menu",""],["pButton","","icon","pi pi-list","type","button",3,"label","click"],["formControlName","tripDate","required","",3,"showIcon"],["severity","error","text","Trip Date is required",4,"ngIf"],["severity","error","text","Trip Date is required"],["formControlName","startTime","required","",3,"timeOnly"],["type","text","hidden","","formControlName","tripDate","required","",3,"ngModel","ngModelChange"],["type","date","formControlName","startTime","required","","pInputText",""],[1,"p-col-6"],["severity","error","text","Start Time is required",4,"ngIf"],["severity","error","text","Start Time is required"],["formControlName","endTime","required","",3,"timeOnly"],["type","date","formControlName","endTime","required","","pInputText",""],["severity","error","text","End Time is required",4,"ngIf"],["severity","error","text","End Time is required"],["severity","error","text","Going place is required"],["severity","error","text","Requester Id is required"],["severity","error","text","Requester Id is not exists if not registered please first register"],["colspan","5",2,"color","red","text-align","center"],[3,"value"],["type","button","pButton","","icon","pi pi-check",1,"p-button-success",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"p-dialog",0),l.NdJ("visibleChange",function(e){return t.responseDialog=e}),l.TgZ(1,"p-header"),l.TgZ(2,"p"),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"p"),l._uU(5),l.qZA(),l.TgZ(6,"p-footer"),l.TgZ(7,"button",1),l.NdJ("click",function(){return t.Okonclick()}),l.ALo(8,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"div",2),l.TgZ(10,"div",3),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.TgZ(13,"div",4),l.YNc(14,y,3,4,"span",5),l.qZA(),l.TgZ(15,"div",4),l.YNc(16,x,3,4,"span",5),l.qZA(),l.TgZ(17,"div",4),l.TgZ(18,"div"),l.TgZ(19,"p-dropdown",6),l.NdJ("onChange",function(e){return t.requestTypeChage(e)})("click",function(e){return t.requestTypeChage(e)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(20,"div",7),l.TgZ(21,"span"),l.TgZ(22,"p-button",8),l.NdJ("click",function(){return t.AllRequests()}),l.ALo(23,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"p-table",9),l.YNc(25,R,2,2,"ng-template",10),l.YNc(26,k,22,14,"ng-template",11),l.qZA(),l.TgZ(27,"p-dialog",12),l.NdJ("visibleChange",function(e){return t.display=e}),l.ALo(28,"translate"),l.TgZ(29,"form",13),l.NdJ("ngSubmit",function(){return t.onClickRegisterRequest()}),l.TgZ(30,"div",14),l.TgZ(31,"div",15),l.YNc(32,L,6,5,"span",5),l.qZA(),l.TgZ(33,"div",16),l.YNc(34,O,5,4,"span",5),l.YNc(35,Q,6,4,"span",5),l.qZA(),l.YNc(36,E,2,1,"div",17),l.TgZ(37,"div",16),l.YNc(38,P,5,4,"span",5),l.YNc(39,B,5,3,"span",5),l.qZA(),l.YNc(40,$,2,1,"div",17),l.TgZ(41,"div",15),l.TgZ(42,"label"),l._uU(43),l.ALo(44,"translate"),l.qZA(),l._UZ(45,"input",18),l.YNc(46,H,1,0,"p-message",19),l.qZA(),l.TgZ(47,"div",15),l.TgZ(48,"label"),l._uU(49),l.ALo(50,"translate"),l.qZA(),l._UZ(51,"input",20),l.YNc(52,V,1,0,"p-message",21),l.YNc(53,G,1,0,"p-message",22),l.qZA(),l.TgZ(54,"div",23),l.TgZ(55,"label",24),l._uU(56),l.ALo(57,"translate"),l.qZA(),l._UZ(58,"textarea",25),l.qZA(),l.qZA(),l.TgZ(59,"div",2),l.TgZ(60,"div",26),l.TgZ(61,"button",27),l.NdJ("click",function(){return t.onClickRegisterRequest()}),l.ALo(62,"translate"),l.qZA(),l.qZA(),l.TgZ(63,"div",3),l.TgZ(64,"button",28),l.NdJ("click",function(){return t.display=!1}),l.ALo(65,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(66,"p-dialog",29),l.NdJ("visibleChange",function(e){return t.displayAccept=e}),l.ALo(67,"translate"),l.TgZ(68,"div",30),l.TgZ(69,"button",31),l.NdJ("click",function(){return t.vehicleSelectedData()}),l.qZA(),l.qZA(),l.TgZ(70,"p-table",32),l.NdJ("selectionChange",function(e){return t.selecteData=e}),l.YNc(71,K,2,2,"ng-template",10),l.YNc(72,X,13,5,"ng-template",11),l.qZA(),l.qZA(),l.TgZ(73,"p-dialog",12),l.NdJ("visibleChange",function(e){return t.rejectDisplay=e}),l.ALo(74,"translate"),l.TgZ(75,"form",13),l.NdJ("ngSubmit",function(){return t.onClickRejectRequest()}),l.TgZ(76,"div",14),l.TgZ(77,"div",23),l.TgZ(78,"label",24),l._uU(79),l.ALo(80,"translate"),l.qZA(),l._UZ(81,"textarea",25),l.qZA(),l.TgZ(82,"div",33),l.TgZ(83,"button",34),l.NdJ("click",function(){return t.onClickRejectRequest()}),l.ALo(84,"translate"),l.qZA(),l.qZA(),l.TgZ(85,"div",33),l.TgZ(86,"button",35),l.NdJ("click",function(){return t.rejectDisplay=!1}),l.ALo(87,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Akn(l.DdM(97,ee)),l.Q6J("visible",t.responseDialog)("modal",!0),l.xp6(2),l.Tol(t.responseStyle),l.xp6(1),l.hij(" ",t.responseTitle," "),l.xp6(1),l.Tol(t.responseStyle),l.xp6(1),l.hij(" ",t.responseMesssage," "),l.xp6(2),l.s9C("label",l.lcZ(8,69,"ok")),l.xp6(4),l.hij(" ",l.lcZ(12,71,t.headerTitle),""),l.xp6(3),l.Q6J("ngIf","FleetManager"==t.userRole||"PoolServiceAdministrator"==t.userRole),l.xp6(2),l.Q6J("ngIf","FleetManager"==t.userRole||"PoolServiceAdministrator"==t.userRole),l.xp6(3),l.Q6J("options",t.requestTypeList),l.xp6(3),l.s9C("label",l.lcZ(23,73,"refresh")),l.xp6(2),l.Q6J("value",t.request)("autoLayout",!0)("loading",t.loading)("paginator",!0)("rows",5)("responsive",!0),l.xp6(3),l.Akn(l.DdM(98,te)),l.s9C("header",l.lcZ(28,75,t.dialogTitle)),l.Q6J("visible",t.display)("transitionOptions","0ms")("modal",!0),l.xp6(2),l.Q6J("formGroup",t.userform),l.xp6(3),l.Q6J("ngIf","indoor"==t.requestType),l.xp6(2),l.Q6J("ngIf","indoor"==t.requestType),l.xp6(1),l.Q6J("ngIf","field"==t.requestType),l.xp6(1),l.Q6J("ngIf",t.userform.controls.startTime.errors&&t.userform.controls.startTime.dirty&&t.userform.controls.startTime.touched),l.xp6(2),l.Q6J("ngIf","indoor"==t.requestType),l.xp6(1),l.Q6J("ngIf","field"==t.requestType),l.xp6(1),l.Q6J("ngIf",t.userform.controls.endTime.errors&&t.userform.controls.endTime.dirty&&t.userform.controls.endTime.touched),l.xp6(3),l.hij(" ",l.lcZ(44,77,"place"),""),l.xp6(3),l.Q6J("ngIf",!t.userform.controls.place.valid&&t.userform.controls.place.dirty),l.xp6(3),l.hij(" ",l.lcZ(50,79,"passengerId"),""),l.xp6(3),l.Q6J("ngIf",t.userform.controls.requester.touched&&(null==t.userform.controls.requester.errors?null:t.userform.controls.requester.errors.required)),l.xp6(1),l.Q6J("ngIf",t.userform.controls.requester.touched&&(null==t.userform.controls.requester.errors?null:t.userform.controls.requester.errors.userNameNotAvailable)),l.xp6(3),l.Oqu(l.lcZ(57,81,"reason")),l.xp6(5),l.s9C("label",l.lcZ(62,83,"save")),l.Q6J("disabled",!t.userform.valid||t.submitted),l.xp6(3),l.s9C("label",l.lcZ(65,85,"cancel")),l.xp6(2),l.Akn(l.DdM(99,ee)),l.s9C("header",l.lcZ(67,87,"selectVehicleandAssign")),l.Q6J("visible",t.displayAccept)("modal",!0),l.xp6(3),l.Q6J("disabled",!t.selecteData||!t.selecteData.length),l.xp6(1),l.Q6J("value",t.vehicle)("paginator",!0)("rows",5)("responsive",!0)("selection",t.selecteData),l.xp6(3),l.Akn(l.DdM(100,se)),l.s9C("header",l.lcZ(74,89,t.rejectDialogTitle)),l.Q6J("visible",t.rejectDisplay)("transitionOptions","0ms")("modal",!0),l.xp6(2),l.Q6J("formGroup",t.rejectform),l.xp6(4),l.Oqu(l.lcZ(80,91,"reason")),l.xp6(4),l.s9C("label",l.lcZ(84,93,"register")),l.Q6J("disabled",!t.rejectform.valid||t.rejectsubmitted),l.xp6(3),l.s9C("label",l.lcZ(87,95,"cancel")))},directives:[p.V,d.h4,d.$_,h.Hq,i.O5,g.Lt,h.zx,q.iA,d.jx,n.vK,n.JL,n.sg,n.Fj,n.JJ,n.u,Z.o,n.Q7,m.g,f.v2,A.f,T.q,q.Mo,q.UA],pipes:[c.X$,i.uU],styles:[""]}),e})()}];let re=(()=>{class e{}return e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({factory:function(t){return new(t||e)},imports:[[r.Bz.forChild(ie)],r.Bz]}),e})();var ne=s(35119);let oe=(()=>{class e{}return e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({factory:function(t){return new(t||e)},imports:[[i.ez,re,ne.n]]}),e})()}}]);