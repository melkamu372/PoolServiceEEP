(self.webpackChunknote=self.webpackChunknote||[]).push([[237],{49237:function(e,t,s){"use strict";s.r(t),s.d(t,{HomePoolRequestModule:function(){return O}});var o=s(61116),i=s(14969),n=s(8361),r=s(35366),l=s(77744),u=s(89521),a=s(65916),c=s(28451),p=s(94217),g=s(49783),h=s(28302);function Z(e,t){1&e&&(r.TgZ(0,"th"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"request")))}function d(e,t){if(1&e&&(r.TgZ(0,"tr",9),r.TgZ(1,"th"),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.TgZ(4,"th"),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.TgZ(7,"th"),r._uU(8),r.ALo(9,"translate"),r.qZA(),r.TgZ(10,"th"),r._uU(11),r.ALo(12,"translate"),r.qZA(),r.TgZ(13,"th"),r._uU(14),r.ALo(15,"translate"),r.qZA(),r.TgZ(16,"th"),r._uU(17),r.ALo(18,"translate"),r.qZA(),r.TgZ(19,"th"),r._uU(20),r.ALo(21,"translate"),r.qZA(),r.YNc(22,Z,3,3,"th",8),r.qZA()),2&e){const e=r.oxw(2);r.xp6(2),r.Oqu(r.lcZ(3,8,"departure")),r.xp6(3),r.Oqu(r.lcZ(6,10,"way")),r.xp6(3),r.Oqu(r.lcZ(9,12,"destination")),r.xp6(3),r.Oqu(r.lcZ(12,14,"department")),r.xp6(3),r.Oqu(r.lcZ(15,16,"requestBy")),r.xp6(3),r.Oqu(r.lcZ(18,18,"Phone")),r.xp6(3),r.Oqu(r.lcZ(21,20,"requestDate")),r.xp6(2),r.Q6J("ngIf","FleetManager"==e.userRole)}}function q(e,t){1&e&&(r.TgZ(0,"tr"),r.TgZ(1,"th",10),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.qZA()),2&e&&(r.xp6(2),r.Oqu(r.lcZ(3,1,"noHomePoolRequest")))}function A(e,t){if(1&e&&(r.YNc(0,d,23,22,"tr",7),r.YNc(1,q,4,3,"tr",8)),2&e){const e=r.oxw();r.Q6J("ngIf",0!=e.HomePoolRequest.length),r.xp6(1),r.Q6J("ngIf",0==e.HomePoolRequest.length)}}function m(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"td"),r.TgZ(1,"p-button",12),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw().selectRoute(t)}),r.ALo(2,"translate"),r.qZA(),r.qZA()}2&e&&(r.xp6(1),r.s9C("label",r.lcZ(2,1,"accept")))}function T(e,t){if(1&e&&(r.TgZ(0,"tr",11),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.qZA(),r.TgZ(11,"td"),r._uU(12),r.qZA(),r.TgZ(13,"td"),r._uU(14),r.ALo(15,"date"),r.qZA(),r.YNc(16,m,3,3,"td",8),r.qZA()),2&e){const e=t.$implicit,s=r.oxw();r.xp6(2),r.Oqu(e.route.departure),r.xp6(2),r.hij(" ",e.route.way," "),r.xp6(2),r.hij(" ",e.route.destination," "),r.xp6(2),r.Oqu(e.requester.department.name),r.xp6(2),r.AsE("",e.requester.firstName," ",e.requester.lastName,""),r.xp6(2),r.Oqu(e.requester.phoneNumber),r.xp6(2),r.Oqu(r.xi3(15,9,e.requestedDate,"MMM,dd/yyyy")),r.xp6(2),r.Q6J("ngIf","FleetManager"==s.userRole)}}function x(e,t){1&e&&(r.TgZ(0,"tr"),r.TgZ(1,"th"),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.TgZ(4,"th"),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.TgZ(7,"th"),r._uU(8),r.ALo(9,"translate"),r.qZA(),r.TgZ(10,"th"),r._uU(11),r.ALo(12,"translate"),r.qZA(),r.TgZ(13,"th"),r._uU(14),r.ALo(15,"translate"),r.qZA(),r.qZA()),2&e&&(r.xp6(2),r.hij("",r.lcZ(3,5,"name")," "),r.xp6(3),r.Oqu(r.lcZ(6,7,"model")),r.xp6(3),r.hij("",r.lcZ(9,9,"plateNumber")," "),r.xp6(3),r.Oqu(r.lcZ(12,11,"seatCapacity")),r.xp6(3),r.hij(" ",r.lcZ(15,13,"assign"),""))}function f(e,t){1&e&&(r.TgZ(0,"tr"),r.TgZ(1,"th",10),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.qZA()),2&e&&(r.xp6(2),r.Oqu(r.lcZ(3,1,"noAssignedBus")))}function b(e,t){if(1&e&&(r.YNc(0,x,16,15,"tr",8),r.YNc(1,f,4,3,"tr",8)),2&e){const e=r.oxw();r.Q6J("ngIf",0!=e.vehicle.length),r.xp6(1),r.Q6J("ngIf",0==e.vehicle.length)}}function v(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r.TgZ(10,"button",13),r.NdJ("click",function(){r.CHM(e);const s=t.$implicit;return r.oxw().selectVehicle(s)}),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(2),r.Oqu(e.bus.name),r.xp6(2),r.Oqu(e.bus.model),r.xp6(2),r.Oqu(e.bus.platenumber),r.xp6(2),r.hij("",e.bus.seatCapacity," ")}}const y=function(){return{width:"50vw"}},U=[{path:"",component:(()=>{class e{constructor(e,t,s){this.poolService=e,this.sessionService=t,this.supportMethod=s,this.vehicle=[],this.newPoolAssignment={requestID:"",busID:"",fleetManagerId:""},this.iserror=!1,this.responseTitle="",this.responseDialog=!1,this.responseMesssage="",this.responseStyle="",this.newHomeServiceAssignment={routeId:"",requestId:"",assignerId:"",status:"Active"},this.displayAccept=!1,this.display=!1}ngOnInit(){this.loading=!1,this.user=this.sessionService.getItem("currentUser"),this.userRole=this.supportMethod.getUserRole(this.user),this.getHomePoolRequest()}getHomePoolRequest(){this.loading=!0,this.poolService.getActiveHomePoolRequest().then(e=>{this.HomePoolRequest=e,this.loading=!1})}selectRoute(e){this.displayAccept=!0,this.newHomeServiceAssignment.requestId=e.id,this.newHomeServiceAssignment.assignerId=this.user.user.id,this.poolService.getBusRouteAssignmentByRoute(e.route.routeId).then(e=>{this.vehicle=e,this.loading=!1})}selectVehicle(e){this.newHomeServiceAssignment.routeId=e.id,this.displayAccept=!1,this.poolService.RegisterHomePoolRequestAssignment(this.newHomeServiceAssignment).subscribe(e=>{this.iserror=!1,this.responseStyle="success",this.responseDialog=!0,this.responseTitle="SUCCESS!!!",this.responseMesssage="Request Assigned successfully ",this.display=!1,this.submitted=!1},e=>{this.iserror=!0,this.responseTitle="Error!!!",this.responseDialog=!0,this.responseMesssage="",this.display=!1,this.responseStyle="error";for(const[t,s]of Object.entries(e))this.responseMesssage=this.responseMesssage+s;this.submitted=!1})}Okonclick(){this.responseDialog=!1,location.reload()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(n.q),r.Y36(l.m),r.Y36(u.p))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-home-pool-request"]],decls:17,vars:31,consts:[[3,"visible","modal","visibleChange"],["type","button","pButton","","icon","pi pi-check",3,"label","click"],[3,"value","autoLayout","loading"],["pTemplate","header"],["pTemplate","body"],[3,"header","visible","modal","visibleChange"],[3,"value","paginator","rows","responsive"],["class","header-row",4,"ngIf"],[4,"ngIf"],[1,"header-row"],["colspan","5",2,"color","red","text-align","center"],[1,"body-row"],["styleClass","p-button-success","badgeClass","p-badge-danger",3,"label","click"],["type","button","pButton","","icon","pi pi-check",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"p-dialog",0),r.NdJ("visibleChange",function(e){return t.responseDialog=e}),r.TgZ(1,"p-header"),r.TgZ(2,"p"),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"p"),r._uU(5),r.qZA(),r.TgZ(6,"p-footer"),r.TgZ(7,"button",1),r.NdJ("click",function(){return t.Okonclick()}),r.ALo(8,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"p-table",2),r.YNc(10,A,2,2,"ng-template",3),r.YNc(11,T,17,12,"ng-template",4),r.qZA(),r.TgZ(12,"p-dialog",5),r.NdJ("visibleChange",function(e){return t.displayAccept=e}),r.ALo(13,"translate"),r.TgZ(14,"p-table",6),r.YNc(15,b,2,2,"ng-template",3),r.YNc(16,v,11,4,"ng-template",4),r.qZA(),r.qZA()),2&e&&(r.Akn(r.DdM(29,y)),r.Q6J("visible",t.responseDialog)("modal",!0),r.xp6(2),r.Tol(t.responseStyle),r.xp6(1),r.hij(" ",t.responseTitle," "),r.xp6(1),r.Tol(t.responseStyle),r.xp6(1),r.hij(" ",t.responseMesssage," "),r.xp6(2),r.s9C("label",r.lcZ(8,25,"ok")),r.xp6(2),r.Q6J("value",t.HomePoolRequest)("autoLayout",!0)("loading",t.loading),r.xp6(3),r.Akn(r.DdM(30,y)),r.s9C("header",r.lcZ(13,27,"selectVehicleandAssign")),r.Q6J("visible",t.displayAccept)("modal",!0),r.xp6(2),r.Q6J("value",t.vehicle)("paginator",!0)("rows",5)("responsive",!0))},directives:[a.V,c.h4,c.$_,p.Hq,g.iA,c.jx,o.O5,p.zx],pipes:[h.X$,o.uU],styles:[""]}),e})()}];let _=(()=>{class e{}return e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({factory:function(t){return new(t||e)},imports:[[i.Bz.forChild(U)],i.Bz]}),e})();var w=s(35119);let O=(()=>{class e{}return e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({factory:function(t){return new(t||e)},imports:[[o.ez,_,w.n]]}),e})()}}]);