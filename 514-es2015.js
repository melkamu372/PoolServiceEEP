(self.webpackChunknote=self.webpackChunknote||[]).push([[514],{79514:function(e,t,s){"use strict";s.r(t),s.d(t,{HomeServiceModule:function(){return U}});var i=s(61116),o=s(14969),r=s(8361),n=s(35366),l=s(77744),c=s(89521),h=s(65916),u=s(28451),a=s(94217),p=s(49783),g=s(28302);function d(e,t){1&e&&(n.TgZ(0,"tr",11),n.TgZ(1,"th"),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"th"),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"th"),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"th"),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.TgZ(13,"th"),n._uU(14),n.ALo(15,"translate"),n.qZA(),n.TgZ(16,"th"),n._uU(17),n.ALo(18,"translate"),n.qZA(),n.TgZ(19,"th"),n._uU(20),n.ALo(21,"translate"),n.qZA(),n.TgZ(22,"th"),n._uU(23),n.ALo(24,"translate"),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Oqu(n.lcZ(3,8,"name")),n.xp6(3),n.Oqu(n.lcZ(6,10,"vehicle")),n.xp6(3),n.Oqu(n.lcZ(9,12,"plateNumber")),n.xp6(3),n.Oqu(n.lcZ(12,14,"driver")),n.xp6(3),n.Oqu(n.lcZ(15,16,"phone")),n.xp6(3),n.Oqu(n.lcZ(18,18,"line")),n.xp6(3),n.Oqu(n.lcZ(21,20,"way")),n.xp6(3),n.Oqu(n.lcZ(24,22,"assignDate")))}function Z(e,t){1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th",12),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Oqu(n.lcZ(3,1,"noHomeServiceUser")))}function m(e,t){if(1&e&&(n.YNc(0,d,25,24,"tr",9),n.YNc(1,Z,4,3,"tr",10)),2&e){const e=n.oxw();n.Q6J("ngIf",0!=e.homeService.length),n.xp6(1),n.Q6J("ngIf",0==e.homeService.length)}}function q(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n._UZ(5,"br"),n.qZA(),n.TgZ(6,"td"),n._uU(7),n._UZ(8,"br"),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n._uU(14),n.qZA(),n.TgZ(15,"td"),n._uU(16),n.qZA(),n.TgZ(17,"td"),n._uU(18),n.ALo(19,"date"),n.qZA(),n.qZA()),2&e){const e=t.$implicit;n.xp6(2),n.AsE("",e.homePoolRequeste.requester.firstName," ",e.homePoolRequeste.requester.lastName,""),n.xp6(2),n.hij(" ",e.route.bus.name," "),n.xp6(3),n.hij(" ",e.route.bus.platenumber,""),n.xp6(3),n.hij(" ",e.route.bus.driverName," "),n.xp6(2),n.hij(" ",e.route.bus.driverPhone," "),n.xp6(2),n.AsE("",e.route.route.departure," To ",e.route.route.destination,""),n.xp6(2),n.Oqu(e.route.route.way),n.xp6(2),n.Oqu(n.xi3(19,10,e.assignDate,"MMM,dd/yyyy"))}}function A(e,t){1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"th"),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"th"),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"th"),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"th"),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.TgZ(13,"th"),n._uU(14),n.ALo(15,"translate"),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.hij("",n.lcZ(3,5,"name")," "),n.xp6(3),n.Oqu(n.lcZ(6,7,"model")),n.xp6(3),n.hij("",n.lcZ(9,9,"plateNumber")," "),n.xp6(3),n.Oqu(n.lcZ(12,11,"seatCapacity")),n.xp6(3),n.hij(" ",n.lcZ(15,13,"assign"),""))}function v(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n.TgZ(10,"button",13),n.NdJ("click",function(){n.CHM(e);const s=t.$implicit;return n.oxw().selectVehicle(s)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e.bus.name),n.xp6(2),n.Oqu(e.bus.model),n.xp6(2),n.Oqu(e.bus.platenumber),n.xp6(2),n.hij("",e.bus.seatCapacity," ")}}const T=function(){return{width:"50vw"}},S=[{path:"",component:(()=>{class e{constructor(e,t,s){this.poolService=e,this.sessionService=t,this.supportMethod=s,this.homeService=[],this.homeServiceSize=0,this.homeServiceRequestSize=0,this.HomePoolRCount=0,this.headerTitle="",this.newHomePool={routeId:"",userId:"string",assigndate:new Date,assignby:"",isActive:!0,reqid:""},this.submitted=!1,this.iserror=!1,this.responseTitle="",this.responseDialog=!1,this.responseMesssage="",this.responseStyle="",this.isHomeService=0}ngOnInit(){this.user=this.sessionService.getItem("currentUser"),this.userRole=this.supportMethod.getUserRole(this.user),this.CountActiveHomePoolRequest(),this.loading=!1,this.displayAccept=!1,this.getHomeService(),this.headerTitle="Home Pool Service Assignment List","FleetManager"==this.userRole?this.getHomeService():this.getHomeServiceByUser()}getHomeService(){this.loading=!0,this.poolService.getHomeService().then(e=>{this.homeService=e,this.loading=!1})}getHomeServiceByUser(){this.loading=!0,this.poolService.getHomeService().then(e=>{this.homeService=e.filter(e=>e.homePoolRequeste.requester.department.departmentId==this.user.user.department.departmentId),this.loading=!1})}CountActiveHomePoolRequest(){this.loading=!0,this.poolService.countActiveHomePoolRequest().then(e=>{this.HomePoolRCount=e})}getHomePoolRequest(){this.loading=!0,this.poolService.getHomePoolRequest().then(e=>{this.homeServiceRequest=e,this.homeServiceRequestSize=e.length,this.loading=!1})}HomerePollrequests(){this.headerTitle="Requests For Home Pool Service",this.homeServiceSize=0,this.getHomePoolRequest()}HomePoolList(){this.headerTitle="Home Pool Service Assignment List",this.homeServiceRequestSize=0,this.getHomeService()}getVehicle(){this.poolService.getBusRouteAssignment().then(e=>{this.vehicle=e,this.loading=!1})}getSelectedRequest(e){this.displayAccept=!0,this.SelectedUserId=e.user.id,this.requestID=e.id,this.getVehicle()}selectVehicle(e){this.displayAccept=!1,this.newHomePool.routeId=e.id,this.newHomePool.userId=this.SelectedUserId,this.newHomePool.assignby=this.user.user.userName,this.newHomePool.reqid=this.requestID,this.poolService.RegisterHomeService(this.newHomePool).subscribe(e=>{this.iserror=!1,this.responseStyle="success",this.responseDialog=!0,this.responseTitle="SUCCESS!!!",this.responseMesssage="Assigned successfully ",this.displayAccept=!1,this.submitted=!1},e=>{this.iserror=!0,this.responseTitle="Error!!!",this.responseDialog=!0,this.responseMesssage="",this.displayAccept=!1,this.responseStyle="error";for(const[t,s]of Object.entries(e))this.responseMesssage=this.responseMesssage+s;this.submitted=!1})}Okonclick(){this.responseDialog=!1,location.reload()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(r.q),n.Y36(l.m),n.Y36(c.p))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-home-service"]],decls:21,vars:34,consts:[[3,"visible","modal","visibleChange"],["type","button","pButton","","icon","pi pi-check",3,"label","click"],[1,"p-grid"],[1,"p-col-7"],[3,"value","autoLayout","loading"],["pTemplate","header"],["pTemplate","body"],[3,"header","visible","modal","visibleChange"],[3,"value","paginator","rows","responsive"],["class","header-row",4,"ngIf"],[4,"ngIf"],[1,"header-row"],["colspan","5",2,"color","red","text-align","center"],["type","button","pButton","","icon","pi pi-check",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"p-dialog",0),n.NdJ("visibleChange",function(e){return t.responseDialog=e}),n.TgZ(1,"p-header"),n.TgZ(2,"p"),n._uU(3),n.qZA(),n.qZA(),n.TgZ(4,"p"),n._uU(5),n.qZA(),n.TgZ(6,"p-footer"),n.TgZ(7,"button",1),n.NdJ("click",function(){return t.Okonclick()}),n.ALo(8,"translate"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"div",2),n.TgZ(10,"div",3),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.qZA(),n.TgZ(13,"p-table",4),n.YNc(14,m,2,2,"ng-template",5),n.YNc(15,q,20,13,"ng-template",6),n.qZA(),n.TgZ(16,"p-dialog",7),n.NdJ("visibleChange",function(e){return t.displayAccept=e}),n.ALo(17,"translate"),n.TgZ(18,"p-table",8),n.YNc(19,A,16,15,"ng-template",5),n.YNc(20,v,11,4,"ng-template",6),n.qZA(),n.qZA()),2&e&&(n.Akn(n.DdM(32,T)),n.Q6J("visible",t.responseDialog)("modal",!0),n.xp6(2),n.Tol(t.responseStyle),n.xp6(1),n.hij(" ",t.responseTitle," "),n.xp6(1),n.Tol(t.responseStyle),n.xp6(1),n.hij(" ",t.responseMesssage," "),n.xp6(2),n.s9C("label",n.lcZ(8,26,"ok")),n.xp6(4),n.hij(" ",n.lcZ(12,28,t.headerTitle),""),n.xp6(2),n.Q6J("value",t.homeService)("autoLayout",!0)("loading",t.loading),n.xp6(3),n.Akn(n.DdM(33,T)),n.s9C("header",n.lcZ(17,30,"selectVehicleandAssign")),n.Q6J("visible",t.displayAccept)("modal",!0),n.xp6(2),n.Q6J("value",t.vehicle)("paginator",!0)("rows",5)("responsive",!0))},directives:[h.V,u.h4,u.$_,a.Hq,p.iA,u.jx,i.O5],pipes:[g.X$,i.uU],styles:[""]}),e})()}];let b=(()=>{class e{}return e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({factory:function(t){return new(t||e)},imports:[[o.Bz.forChild(S)],o.Bz]}),e})();var x=s(35119);let U=(()=>{class e{}return e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({factory:function(t){return new(t||e)},imports:[[i.ez,b,x.n]]}),e})()}}]);