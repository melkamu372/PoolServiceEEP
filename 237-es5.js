!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var s,o,r=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(s=n.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){a=!0,o=u}finally{try{i||null==n.return||n.return()}finally{if(a)throw o}}return r}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(self.webpackChunknote=self.webpackChunknote||[]).push([[237],{49237:function(t,o,r){"use strict";r.r(o),r.d(o,{HomePoolRequestModule:function(){return C}});var i=r(61116),a=r(14969),u=r(8361),l=r(35366),c=r(77744),p=r(89521),g=r(65916),h=r(28451),Z=r(94217),d=r(49783),A=r(28302);function f(e,t){1&e&&(l.TgZ(0,"th"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.Oqu(l.lcZ(2,1,"request")))}function q(e,t){if(1&e&&(l.TgZ(0,"tr",9),l.TgZ(1,"th"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"th"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"th"),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.TgZ(10,"th"),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.TgZ(13,"th"),l._uU(14),l.ALo(15,"translate"),l.qZA(),l.TgZ(16,"th"),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.TgZ(19,"th"),l._uU(20),l.ALo(21,"translate"),l.qZA(),l.YNc(22,f,3,3,"th",8),l.qZA()),2&e){var n=l.oxw(2);l.xp6(2),l.Oqu(l.lcZ(3,8,"departure")),l.xp6(3),l.Oqu(l.lcZ(6,10,"way")),l.xp6(3),l.Oqu(l.lcZ(9,12,"destination")),l.xp6(3),l.Oqu(l.lcZ(12,14,"department")),l.xp6(3),l.Oqu(l.lcZ(15,16,"requestBy")),l.xp6(3),l.Oqu(l.lcZ(18,18,"Phone")),l.xp6(3),l.Oqu(l.lcZ(21,20,"requestDate")),l.xp6(2),l.Q6J("ngIf","FleetManager"==n.userRole)}}function m(e,t){1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"th",10),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.Oqu(l.lcZ(3,1,"noHomePoolRequest")))}function v(e,t){if(1&e&&(l.YNc(0,q,23,22,"tr",7),l.YNc(1,m,4,3,"tr",8)),2&e){var n=l.oxw();l.Q6J("ngIf",0!=n.HomePoolRequest.length),l.xp6(1),l.Q6J("ngIf",0==n.HomePoolRequest.length)}}function y(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"td"),l.TgZ(1,"p-button",12),l.NdJ("click",function(){l.CHM(n);var e=l.oxw().$implicit;return l.oxw().selectRoute(e)}),l.ALo(2,"translate"),l.qZA(),l.qZA()}2&e&&(l.xp6(1),l.s9C("label",l.lcZ(2,1,"accept")))}function T(e,t){if(1&e&&(l.TgZ(0,"tr",11),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.TgZ(9,"td"),l._uU(10),l.qZA(),l.TgZ(11,"td"),l._uU(12),l.qZA(),l.TgZ(13,"td"),l._uU(14),l.ALo(15,"date"),l.qZA(),l.YNc(16,y,3,3,"td",8),l.qZA()),2&e){var n=t.$implicit,s=l.oxw();l.xp6(2),l.Oqu(n.route.departure),l.xp6(2),l.hij(" ",n.route.way," "),l.xp6(2),l.hij(" ",n.route.destination," "),l.xp6(2),l.Oqu(n.requester.department.name),l.xp6(2),l.AsE("",n.requester.firstName," ",n.requester.lastName,""),l.xp6(2),l.Oqu(n.requester.phoneNumber),l.xp6(2),l.Oqu(l.xi3(15,9,n.requestedDate,"MMM,dd/yyyy")),l.xp6(2),l.Q6J("ngIf","FleetManager"==s.userRole)}}function b(e,t){1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"th"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"th"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"th"),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.TgZ(10,"th"),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.TgZ(13,"th"),l._uU(14),l.ALo(15,"translate"),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.hij("",l.lcZ(3,5,"name")," "),l.xp6(3),l.Oqu(l.lcZ(6,7,"model")),l.xp6(3),l.hij("",l.lcZ(9,9,"plateNumber")," "),l.xp6(3),l.Oqu(l.lcZ(12,11,"seatCapacity")),l.xp6(3),l.hij(" ",l.lcZ(15,13,"assign"),""))}function x(e,t){1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"th",10),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.Oqu(l.lcZ(3,1,"noAssignedBus")))}function w(e,t){if(1&e&&(l.YNc(0,b,16,15,"tr",8),l.YNc(1,x,4,3,"tr",8)),2&e){var n=l.oxw();l.Q6J("ngIf",0!=n.vehicle.length),l.xp6(1),l.Q6J("ngIf",0==n.vehicle.length)}}function U(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.TgZ(9,"td"),l.TgZ(10,"button",13),l.NdJ("click",function(){l.CHM(n);var e=t.$implicit;return l.oxw().selectVehicle(e)}),l.qZA(),l.qZA(),l.qZA()}if(2&e){var s=t.$implicit;l.xp6(2),l.Oqu(s.bus.name),l.xp6(2),l.Oqu(s.bus.model),l.xp6(2),l.Oqu(s.bus.platenumber),l.xp6(2),l.hij("",s.bus.seatCapacity," ")}}var _,O,S=function(){return{width:"50vw"}},k=[{path:"",component:(_=function(){function t(e,s,o){n(this,t),this.poolService=e,this.sessionService=s,this.supportMethod=o,this.vehicle=[],this.newPoolAssignment={requestID:"",busID:"",fleetManagerId:""},this.iserror=!1,this.responseTitle="",this.responseDialog=!1,this.responseMesssage="",this.responseStyle="",this.newHomeServiceAssignment={routeId:"",requestId:"",assignerId:"",status:"Active"},this.displayAccept=!1,this.display=!1}var o,r,i;return o=t,(r=[{key:"ngOnInit",value:function(){this.loading=!1,this.user=this.sessionService.getItem("currentUser"),this.userRole=this.supportMethod.getUserRole(this.user),this.getHomePoolRequest()}},{key:"getHomePoolRequest",value:function(){var e=this;this.loading=!0,this.poolService.getActiveHomePoolRequest().then(function(t){e.HomePoolRequest=t,e.loading=!1})}},{key:"selectRoute",value:function(e){var t=this;this.displayAccept=!0,this.newHomeServiceAssignment.requestId=e.id,this.newHomeServiceAssignment.assignerId=this.user.user.id,this.poolService.getBusRouteAssignmentByRoute(e.route.routeId).then(function(e){t.vehicle=e,t.loading=!1})}},{key:"selectVehicle",value:function(t){var n=this;this.newHomeServiceAssignment.routeId=t.id,this.displayAccept=!1,this.poolService.RegisterHomePoolRequestAssignment(this.newHomeServiceAssignment).subscribe(function(e){n.iserror=!1,n.responseStyle="success",n.responseDialog=!0,n.responseTitle="SUCCESS!!!",n.responseMesssage="Request Assigned successfully ",n.display=!1,n.submitted=!1},function(t){n.iserror=!0,n.responseTitle="Error!!!",n.responseDialog=!0,n.responseMesssage="",n.display=!1,n.responseStyle="error";for(var s=0,o=Object.entries(t);s<o.length;s++){var r=e(o[s],2),i=(r[0],r[1]);n.responseMesssage=n.responseMesssage+i}n.submitted=!1})}},{key:"Okonclick",value:function(){this.responseDialog=!1,location.reload()}}])&&s(o.prototype,r),i&&s(o,i),t}(),_.\u0275fac=function(e){return new(e||_)(l.Y36(u.q),l.Y36(c.m),l.Y36(p.p))},_.\u0275cmp=l.Xpm({type:_,selectors:[["app-home-pool-request"]],decls:17,vars:31,consts:[[3,"visible","modal","visibleChange"],["type","button","pButton","","icon","pi pi-check",3,"label","click"],[3,"value","autoLayout","loading"],["pTemplate","header"],["pTemplate","body"],[3,"header","visible","modal","visibleChange"],[3,"value","paginator","rows","responsive"],["class","header-row",4,"ngIf"],[4,"ngIf"],[1,"header-row"],["colspan","5",2,"color","red","text-align","center"],[1,"body-row"],["styleClass","p-button-success","badgeClass","p-badge-danger",3,"label","click"],["type","button","pButton","","icon","pi pi-check",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"p-dialog",0),l.NdJ("visibleChange",function(e){return t.responseDialog=e}),l.TgZ(1,"p-header"),l.TgZ(2,"p"),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"p"),l._uU(5),l.qZA(),l.TgZ(6,"p-footer"),l.TgZ(7,"button",1),l.NdJ("click",function(){return t.Okonclick()}),l.ALo(8,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"p-table",2),l.YNc(10,v,2,2,"ng-template",3),l.YNc(11,T,17,12,"ng-template",4),l.qZA(),l.TgZ(12,"p-dialog",5),l.NdJ("visibleChange",function(e){return t.displayAccept=e}),l.ALo(13,"translate"),l.TgZ(14,"p-table",6),l.YNc(15,w,2,2,"ng-template",3),l.YNc(16,U,11,4,"ng-template",4),l.qZA(),l.qZA()),2&e&&(l.Akn(l.DdM(29,S)),l.Q6J("visible",t.responseDialog)("modal",!0),l.xp6(2),l.Tol(t.responseStyle),l.xp6(1),l.hij(" ",t.responseTitle," "),l.xp6(1),l.Tol(t.responseStyle),l.xp6(1),l.hij(" ",t.responseMesssage," "),l.xp6(2),l.s9C("label",l.lcZ(8,25,"ok")),l.xp6(2),l.Q6J("value",t.HomePoolRequest)("autoLayout",!0)("loading",t.loading),l.xp6(3),l.Akn(l.DdM(30,S)),l.s9C("header",l.lcZ(13,27,"selectVehicleandAssign")),l.Q6J("visible",t.displayAccept)("modal",!0),l.xp6(2),l.Q6J("value",t.vehicle)("paginator",!0)("rows",5)("responsive",!0))},directives:[g.V,h.h4,h.$_,Z.Hq,d.iA,h.jx,i.O5,Z.zx],pipes:[A.X$,i.uU],styles:[""]}),_)}],I=function(){var e=function e(){n(this,e)};return e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({factory:function(t){return new(t||e)},imports:[[a.Bz.forChild(k)],a.Bz]}),e}(),L=r(35119),C=((O=function e(){n(this,e)}).\u0275mod=l.oAB({type:O}),O.\u0275inj=l.cJS({factory:function(e){return new(e||O)},imports:[[i.ez,I,L.n]]}),O)}}])}();