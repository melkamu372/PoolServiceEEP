!function(){function e(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==s)return;var r,n,i=[],o=!0,a=!1;try{for(s=s.call(e);!(o=(r=s.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){a=!0,n=u}finally{try{o||null==s.return||s.return()}finally{if(a)throw n}}return i}(e,s)||function(e,s){if(!e)return;if("string"==typeof e)return t(e,s);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,s)}(e,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(self.webpackChunknote=self.webpackChunknote||[]).push([[104],{23104:function(t,n,i){"use strict";i.r(n),i.d(n,{RequestModule:function(){return pe}});var o=i(61116),a=i(14969),u=i(11462),l=i(8361),c=i(25529),p=i(35366),d=i(77744),g=i(28302),h=i(65916),f=i(28451),q=i(94217),m=i(23625),Z=i(49783),v=i(14313),A=i(5590),y=i(89548),T=i(46326),b=i(13682);function x(e,t){if(1&e){var s=p.EpF();p.TgZ(0,"span"),p.TgZ(1,"p-button",36),p.NdJ("click",function(){return p.CHM(s),p.oxw().indoorRequests()}),p.ALo(2,"translate"),p.qZA(),p.qZA()}if(2&e){var r=p.oxw();p.xp6(1),p.s9C("label",p.lcZ(2,2,"indoorPoolRequests")),p.s9C("badge",r.indoorRCount)}}function w(e,t){if(1&e){var s=p.EpF();p.TgZ(0,"span"),p.TgZ(1,"p-button",37),p.NdJ("click",function(){return p.CHM(s),p.oxw().fieldRequests()}),p.ALo(2,"translate"),p.qZA(),p.qZA()}if(2&e){var r=p.oxw();p.xp6(1),p.s9C("label",p.lcZ(2,2,"fieldPoolRequests")),p.s9C("badge",r.fieldRCount)}}function R(e,t){1&e&&(p.TgZ(0,"tr",39),p.TgZ(1,"th"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"th"),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.TgZ(7,"th"),p._uU(8),p.ALo(9,"translate"),p.qZA(),p.TgZ(10,"th"),p._uU(11),p.ALo(12,"translate"),p.qZA(),p.TgZ(13,"th"),p._uU(14),p.ALo(15,"translate"),p.qZA(),p.TgZ(16,"th"),p._uU(17),p.ALo(18,"translate"),p.qZA(),p.TgZ(19,"th"),p._uU(20),p.ALo(21,"translate"),p.qZA(),p.TgZ(22,"th"),p._uU(23),p.ALo(24,"translate"),p.qZA(),p.qZA()),2&e&&(p.xp6(2),p.Oqu(p.lcZ(3,8,"requestReason")),p.xp6(3),p.Oqu(p.lcZ(6,10,"goto")),p.xp6(3),p.Oqu(p.lcZ(9,12,"requestType")),p.xp6(3),p.Oqu(p.lcZ(12,14,"requestTime")),p.xp6(3),p.Oqu(p.lcZ(15,16,"startTime")),p.xp6(3),p.Oqu(p.lcZ(18,18,"endTime")),p.xp6(3),p.Oqu(p.lcZ(21,20,"requester")),p.xp6(3),p.Oqu(p.lcZ(24,22,"state")))}function I(e,t){1&e&&(p.TgZ(0,"tr"),p.TgZ(1,"th",40),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.qZA()),2&e&&(p.xp6(2),p.hij(" ",p.lcZ(3,1,"noActivePoolRequest")," "))}function D(e,t){if(1&e&&(p.YNc(0,R,25,24,"tr",38),p.YNc(1,I,4,3,"tr",5)),2&e){var s=p.oxw();p.Q6J("ngIf",0!=s.request.length),p.xp6(1),p.Q6J("ngIf",0==s.request.length)}}function C(e,t){if(1&e&&(p.TgZ(0,"td"),p._uU(1),p.ALo(2,"date"),p.qZA()),2&e){var s=p.oxw().$implicit;p.xp6(1),p.hij("",p.xi3(2,1,s.starttime,"MMM,dd/yyyy hh:mm:a")," ")}}function k(e,t){if(1&e&&(p.TgZ(0,"td"),p._uU(1),p.ALo(2,"date"),p.qZA()),2&e){var s=p.oxw().$implicit;p.xp6(1),p.Oqu(p.xi3(2,1,s.endtime,"MMM,dd/yyyy hh:mm:a"))}}function S(e,t){if(1&e&&(p.TgZ(0,"td"),p._uU(1),p.ALo(2,"date"),p.qZA()),2&e){var s=p.oxw().$implicit;p.xp6(1),p.Oqu(p.xi3(2,1,s.starttime,"MMM,dd/yyyy"))}}function N(e,t){if(1&e&&(p.TgZ(0,"td"),p._uU(1),p.ALo(2,"date"),p.qZA()),2&e){var s=p.oxw().$implicit;p.xp6(1),p.hij(" ",p.xi3(2,1,s.endtime,"MMM,dd/yyyy"),"")}}function U(e,t){1&e&&(p.ynx(0),p._uU(1,"Accepted"),p.BQk())}function M(e,t){if(1&e&&(p.ynx(0),p._uU(1,"Rejected "),p._UZ(2,"br"),p.TgZ(3,"b"),p._uU(4),p.ALo(5,"translate"),p.qZA(),p._uU(6),p.BQk()),2&e){var s=p.oxw(2).$implicit;p.xp6(4),p.Oqu(p.lcZ(5,2,"reason")),p.xp6(2),p.hij(": ",s.statechangeReason," ")}}function J(e,t){if(1&e&&p.YNc(0,M,7,4,"ng-container",42),2&e){var s=p.oxw().$implicit,r=p.MAs(21);p.Q6J("ngIf","rejected"==s.state)("ngIfElse",r)}}function _(e,t){if(1&e){var s=p.EpF();p.TgZ(0,"span"),p._UZ(1,"p-menu",46,47),p.TgZ(3,"button",48),p.NdJ("click",function(e){return p.CHM(s),p.MAs(2).toggle(e)}),p.ALo(4,"translate"),p.qZA(),p.qZA()}if(2&e){var r=p.oxw(2).$implicit,n=p.oxw();p.xp6(1),p.Q6J("popup",!0)("model",n.getRowData(r)),p.xp6(2),p.s9C("label",p.lcZ(4,3,"requestResponse"))}}function j(e,t){if(1&e&&(p.TgZ(0,"label"),p._uU(1),p.qZA()),2&e){var s=p.oxw(2).$implicit;p.xp6(1),p.Oqu(s.state)}}function L(e,t){if(1&e&&(p.YNc(0,_,5,5,"span",42),p.YNc(1,j,2,1,"ng-template",null,45,p.W1O)),2&e){var s=p.MAs(2),r=p.oxw(2);p.Q6J("ngIf","FleetManager"==r.userRole||"PoolServiceAdministrator"==r.userRole)("ngIfElse",s)}}function O(e,t){if(1&e&&(p.TgZ(0,"tr",41),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.ALo(9,"date"),p.qZA(),p.YNc(10,C,3,4,"td",5),p.YNc(11,k,3,4,"td",5),p.YNc(12,S,3,4,"td",5),p.YNc(13,N,3,4,"td",5),p.TgZ(14,"td"),p._uU(15),p.qZA(),p.TgZ(16,"td"),p.YNc(17,U,2,0,"ng-container",42),p.YNc(18,J,1,2,"ng-template",null,43,p.W1O),p.YNc(20,L,3,2,"ng-template",null,44,p.W1O),p.qZA(),p.qZA()),2&e){var s=t.$implicit,r=p.MAs(19);p.xp6(2),p.Oqu(s.reason),p.xp6(2),p.Oqu(s.goto),p.xp6(2),p.Oqu(s.requesttype),p.xp6(2),p.hij(" ",p.xi3(9,11,s.requesteddate,"MMM,dd/yyyy"),""),p.xp6(2),p.Q6J("ngIf","indoor"==s.requesttype),p.xp6(1),p.Q6J("ngIf","indoor"==s.requesttype),p.xp6(1),p.Q6J("ngIf","field"==s.requesttype),p.xp6(1),p.Q6J("ngIf","field"==s.requesttype),p.xp6(2),p.hij(" ",s.requester.department.name," "),p.xp6(2),p.Q6J("ngIf","accepted"==s.state)("ngIfElse",r)}}function Q(e,t){1&e&&p._UZ(0,"p-message",51)}function Y(e,t){if(1&e&&(p.TgZ(0,"span"),p.TgZ(1,"label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p._UZ(4,"p-calendar",49),p.YNc(5,Q,1,0,"p-message",50),p.qZA()),2&e){var s=p.oxw();p.xp6(2),p.Oqu(p.lcZ(3,3,"date")),p.xp6(2),p.Q6J("showIcon",!0),p.xp6(1),p.Q6J("ngIf",!s.userform.controls.tripDate.valid&&s.userform.controls.tripDate.dirty)}}function E(e,t){1&e&&(p.TgZ(0,"span"),p.TgZ(1,"label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p._UZ(4,"p-calendar",52),p.qZA()),2&e&&(p.xp6(2),p.Oqu(p.lcZ(3,2,"startTime")),p.xp6(2),p.Q6J("timeOnly",!0))}function P(e,t){if(1&e){var s=p.EpF();p.TgZ(0,"span"),p.TgZ(1,"input",53),p.NdJ("ngModelChange",function(e){return p.CHM(s),p.oxw().defaultDate=e}),p.qZA(),p.TgZ(2,"label"),p._uU(3),p.ALo(4,"translate"),p.qZA(),p._UZ(5,"input",54),p.qZA()}if(2&e){var r=p.oxw();p.xp6(1),p.Q6J("ngModel",r.defaultDate),p.xp6(2),p.Oqu(p.lcZ(4,2,"startDate"))}}function B(e,t){1&e&&p._UZ(0,"p-message",57)}function F(e,t){if(1&e&&(p.TgZ(0,"div",55),p.YNc(1,B,1,0,"p-message",56),p.qZA()),2&e){var s=p.oxw();p.xp6(1),p.Q6J("ngIf",s.userform.controls.startTime.errors.required)}}function $(e,t){1&e&&(p.TgZ(0,"span"),p.TgZ(1,"label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p._UZ(4,"p-calendar",58),p.qZA()),2&e&&(p.xp6(2),p.Oqu(p.lcZ(3,2,"endTime")),p.xp6(2),p.Q6J("timeOnly",!0))}function H(e,t){1&e&&(p.TgZ(0,"span"),p.TgZ(1,"label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p._UZ(4,"input",59),p.qZA()),2&e&&(p.xp6(2),p.Oqu(p.lcZ(3,1,"endDate")))}function V(e,t){1&e&&p._UZ(0,"p-message",61)}function G(e,t){if(1&e&&(p.TgZ(0,"div",55),p.YNc(1,V,1,0,"p-message",60),p.qZA()),2&e){var s=p.oxw();p.xp6(1),p.Q6J("ngIf",s.userform.controls.endTime.errors.required)}}function z(e,t){1&e&&p._UZ(0,"p-message",62)}function W(e,t){1&e&&p._UZ(0,"p-message",63)}function K(e,t){1&e&&p._UZ(0,"p-message",64)}function X(e,t){1&e&&(p.TgZ(0,"tr"),p.TgZ(1,"th"),p._UZ(2,"p-tableHeaderCheckbox"),p.qZA(),p.TgZ(3,"th"),p._uU(4),p.ALo(5,"translate"),p.qZA(),p.TgZ(6,"th"),p._uU(7),p.ALo(8,"translate"),p.qZA(),p.TgZ(9,"th"),p._uU(10),p.ALo(11,"translate"),p.qZA(),p.TgZ(12,"th"),p._uU(13),p.ALo(14,"translate"),p.qZA(),p.TgZ(15,"th"),p._uU(16),p.ALo(17,"translate"),p.qZA(),p.qZA()),2&e&&(p.xp6(4),p.hij("",p.lcZ(5,5,"name")," "),p.xp6(3),p.Oqu(p.lcZ(8,7,"model")),p.xp6(3),p.hij("",p.lcZ(11,9,"plateNumber")," "),p.xp6(3),p.Oqu(p.lcZ(14,11,"seatCapacity")),p.xp6(3),p.hij(" ",p.lcZ(17,13,"assign"),""))}function ee(e,t){1&e&&(p.TgZ(0,"tr"),p.TgZ(1,"th",65),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.qZA()),2&e&&(p.xp6(2),p.Oqu(p.lcZ(3,1,"noFreeVehicle")))}function te(e,t){if(1&e&&(p.YNc(0,X,18,15,"tr",5),p.YNc(1,ee,4,3,"tr",5)),2&e){var s=p.oxw();p.Q6J("ngIf",0!=s.vehicle.length),p.xp6(1),p.Q6J("ngIf",0==s.vehicle.length)}}function se(e,t){if(1&e){var s=p.EpF();p.TgZ(0,"tr"),p.TgZ(1,"td"),p._UZ(2,"p-tableCheckbox",66),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.qZA(),p.TgZ(9,"td"),p._uU(10),p.qZA(),p.TgZ(11,"td"),p.TgZ(12,"button",67),p.NdJ("click",function(){p.CHM(s);var e=t.$implicit;return p.oxw().assignAVehicle(e)}),p.qZA(),p.qZA(),p.qZA()}if(2&e){var r=t.$implicit;p.xp6(2),p.Q6J("value",r),p.xp6(2),p.Oqu(r.name),p.xp6(2),p.Oqu(r.model),p.xp6(2),p.Oqu(r.platenumber),p.xp6(2),p.hij("",r.seatCapacity," ")}}var re,ne,ie=function(){return{width:"50vw"}},oe=function(){return{width:"35vw"}},ae=function(){return{width:"30vw"}},ue=[{path:"",component:(re=function(){function t(e,r,n,i,o){s(this,t),this.poolService=e,this.fb=r,this.sessionService=n,this.translateService=i,this.customValidator=o,this.newRequest={starttime:new Date,endtime:new Date,requesteddate:new Date,reason:"",goto:"",requesttype:"indoor",state:"request",statechangeReason:"request",changedby:"",requesterId:"",seendate:new Date,managerId:""},this.newPoolAssignment={requestID:"",busID:"",fleetManagerId:"",requesterName:"",requesterPhone:""},this.multiplePoolAssignment={requestID:"",bus:[],fleetManagerId:"",requesterName:"Melkamu Tessema",requesterPhone:"0945272183"},this.newVehicle={vehicleId:""},this.SmsContent={requestID:"",phone:"",body:"",status:"0"},this.iserror=!1,this.responseTitle="",this.responseDialog=!1,this.responseMesssage="",this.responseStyle="",this.vehicle=[],this.requestId="",this.fieldRCount=0,this.indoorRCount=0,this.defaultDate=new Date}var n,i,o;return n=t,(i=[{key:"ngOnInit",value:function(){this.rejectDisplay=!1,this.displayAccept=!1,this.loading=!1,this.display=!1,this.submitted=!1,this.user=this.sessionService.getItem("currentUser"),this.checkRole(),this.getRequest(),this.countRequest("indoor"),this.countRequest("field"),this.userform=this.fb.group({tripDate:new u.NI(this.defaultDate,u.kI.required),endTime:new u.NI("",u.kI.required),reason:new u.NI("",u.kI.required),place:new u.NI("",u.kI.required),startTime:new u.NI("",[u.kI.required]),requester:[null,[u.kI.required],this.customValidator.UserNameNotExistValidator.bind(this.customValidator)]}),this.rejectform=this.fb.group({reason:new u.NI("",u.kI.required)}),this.requestType="indoor",this.requestTypeList=[{name:"Indoor",code:"indoor"},{name:"Field",code:"field"}]}},{key:"getRequest",value:function(){var e=this;this.loading=!0,this.headerTitle="allpoolServiceRequests","FleetManager"==this.userRole||"PoolServiceAdministrator"==this.userRole?this.poolService.getRequest().then(function(t){e.request=t,e.loading=!1}):this.poolService.getRequest().then(function(t){e.request=t.filter(function(t){return t.manager.department.departmentId==e.user.user.department.departmentId}),e.loading=!1})}},{key:"countRequest",value:function(e){var t=this;this.poolService.countRequestByType(e).then(function(s){return"indoor"==e?t.indoorRCount=s:t.fieldRCount=s,s})}},{key:"fieldRequests",value:function(){var e=this;this.loading=!0,this.headerTitle="fieldpoolServiceRequests",this.poolService.getRequestByType("field").then(function(t){e.request=t,e.loading=!1})}},{key:"indoorRequests",value:function(){var e=this;this.loading=!0,this.headerTitle="indoorpoolServiceRequests",this.poolService.getRequestByType("indoor").then(function(t){e.request=t,e.loading=!1})}},{key:"AllRequests",value:function(){this.getRequest()}},{key:"checkRole",value:function(){var e=this;this.user.user.roles.map(function(t){e.userRole=t})}},{key:"getRowData",value:function(e){var t=this;return this.items=[{label:this.translateService.instant("accept"),icon:"pi pi-fw pi-check",command:function(s){t.getSelectedRequest(e)}},{label:this.translateService.instant("reject"),command:function(s){t.getRejectSelectedRequest(e)},icon:"pi pi-fw pi-times"}]}},{key:"requestTypeChage",value:function(e){this.requestType=e.value.code,this.userform.reset(),this.defaultDate=new Date,this.display=!0,this.dialogTitle="registerPoolRequestForm"}},{key:"getSelectedRequest",value:function(e){var t=this;this.displayAccept=!0;var s=e.requesttype;this.newPoolAssignment.requesterName=e.requester.firstName+" "+e.requester.lastName,this.newPoolAssignment.requesterPhone=e.requester.phoneNumber,this.requestId=e.id,this.poolService.getCar().then(function(e){t.vehicle=e.filter(function(e){return"active"==e.status&&e.usedFor==s}),t.loading=!1})}},{key:"onClickRegisterRequest",value:function(){return t=this,r=regeneratorRuntime.mark(function t(){var s,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.submitted=!0,s=this.compareDate(new Date(this.newRequests.starttime),new Date(this.newRequests.endtime)),!this.compareDate(new Date,new Date(this.newRequests.starttime))){t.next=13;break}if(!s){t.next=9;break}return t.next=6,this.poolService.RegisterRequest(this.newRequests).subscribe(function(e){r.iserror=!1,r.responseStyle="success",r.responseDialog=!0,r.responseTitle="SUCCESS!!!",r.responseMesssage="Request information Registered successfully ",r.display=!1,r.submitted=!1},function(t){r.iserror=!0,r.responseTitle="Error!!!",r.responseDialog=!0,r.responseMesssage="",r.display=!1,r.responseStyle="error";for(var s=0,n=Object.entries(t);s<n.length;s++){var i=e(n[s],2),o=(i[0],i[1]);r.responseMesssage=r.responseMesssage+o}r.submitted=!1});case 6:t.t1=void t.sent,t.next=10;break;case 9:t.t1=(this.iserror=!0,this.responseStyle="error",this.responseDialog=!0,this.responseTitle="Error!!!",this.responseMesssage="End Time Should Grater than from Start Time ",this.submitted=!1,!1);case 10:t.t0=t.t1,t.next=14;break;case 13:t.t0=(this.iserror=!0,this.responseStyle="error",this.responseDialog=!0,this.responseTitle="Error!!!",this.responseMesssage="Starting Time Should be future Time ",this.submitted=!1,!1);case 14:return t.abrupt("return",t.t0);case 15:case"end":return t.stop()}},t,this)}),new((s=void 0)||(s=Promise))(function(e,n){function i(e){try{a(r.next(e))}catch(t){n(t)}}function o(e){try{a(r.throw(e))}catch(t){n(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s(function(e){e(r)})).then(i,o)}a((r=r.apply(t,[])).next())});var t,s,r}},{key:"newRequests",get:function(){var e=new Date(this.userform.controls.startTime.value),t=new Date(this.userform.controls.endTime.value);if("indoor"==this.requestType){e=new Date(this.userform.controls.tripDate.value),t=new Date(this.userform.controls.tripDate.value);var s=new Date(this.userform.controls.startTime.value),r=new Date(this.userform.controls.endTime.value);t.setHours(r.getHours()),t.setMinutes(r.getMinutes()),e.setHours(s.getHours()),e.setMinutes(s.getMinutes())}return this.newRequest.starttime=e,this.newRequest.endtime=t,this.newRequest.reason=this.userform.controls.reason.value,this.newRequest.goto=this.userform.controls.place.value,this.newRequest.changedby=this.user.user.userName,this.newRequest.requesttype=this.requestType,this.newRequest.managerId=this.user.user.id,this.newRequest.requesterId=this.userform.controls.requester.value,this.newRequest}},{key:"getRejectSelectedRequest",value:function(e){this.rejectDisplay=!0,this.requestId=e.id,this.rejectDialogTitle="rejectReson",this.rejectedData=e}},{key:"onClickRejectRequest",value:function(){this.newRequest.starttime=this.rejectedData.starttime,this.newRequest.endtime=this.rejectedData.endtime,this.newRequest.requesteddate=this.rejectedData.requesteddate,this.newRequest.reason=this.rejectedData.reason,this.newRequest.goto=this.rejectedData.goto,this.newRequest.requesttype=this.rejectedData.requesttype,this.newRequest.state="rejected",this.newRequest.statechangeReason=this.rejectform.controls.reason.value,this.newRequest.changedby=this.user.user.userName,this.newRequest.requesterId=this.rejectedData.requester.id,this.newRequest.managerId=this.user.user.id,this.rejectDisplay=!1,this.SmsContent.requestID=this.user.user.id,this.SmsContent.phone=this.rejectedData.requester.phoneNumber,this.SmsContent.body="\u12e8\u1351\u120d \u1230\u122d\u126a\u1235 \u1325\u12eb\u1244\u12ce \u12c8\u12f0 ".concat(this.rejectedData.goto," \u121b\u1235\u1270\u1293\u1308\u12f5 \u12a0\u120d\u1270\u127b\u1208\u121d \u1219\u1209 \u1218\u1228\u1303\u12c9\u1295 \u12f5\u1228 \u1308\u1339\u1295 \u12ed\u1218\u120d\u12a8\u1271\u1361\u1361 \u12a5\u1293\u1218\u1230\u1293\u1208\u1295 \u12e8\u12a2.\u12a4.\u1283 \u134d\u120a\u1275 \u121b\u1293\u1305\u1218\u1295\u1275 \u1262\u122e"),this.SendSms(this.SmsContent),this.updateRequestFunction(this.newRequest,this.rejectedData.id,"Suceesfully Completed")}},{key:"assignAVehicle",value:function(t){var s=this;this.displayAccept=!1,this.newPoolAssignment.busID=t.vehicleId,this.newPoolAssignment.requestID=this.requestId,this.newPoolAssignment.fleetManagerId=this.user.user.id,this.poolService.RegisterRequestAssignment(this.newPoolAssignment).subscribe(function(e){s.iserror=!1,s.responseStyle="success",s.responseDialog=!0,s.responseTitle="SUCCESS!!!",s.responseMesssage="Request Assigned successfully ",s.display=!1,s.submitted=!1},function(t){s.iserror=!0,s.responseTitle="Error!!!",s.responseDialog=!0,s.responseMesssage="",s.display=!1,s.responseStyle="error";for(var r=0,n=Object.entries(t);r<n.length;r++){var i=e(n[r],2),o=(i[0],i[1]);s.responseMesssage=s.responseMesssage+o}s.submitted=!1})}},{key:"compareDate",value:function(e,t){return!(e>=t)}},{key:"updateRequestFunction",value:function(t,s,r){var n=this;this.poolService.updateRequest(t,s).subscribe(function(e){n.iserror=!1,n.responseStyle="success",n.responseDialog=!0,n.responseTitle="SUCCESS!!!",n.responseMesssage=r,n.display=!1,n.submitted=!1},function(t){n.iserror=!0,n.responseTitle="Error!!!",n.responseDialog=!0,n.responseMesssage="",n.display=!1,n.responseStyle="error";for(var s=0,r=Object.entries(t);s<r.length;s++){var i=e(r[s],2),o=(i[0],i[1]);n.responseMesssage=n.responseMesssage+o}n.submitted=!1})}},{key:"SendSms",value:function(t){var s=this;this.poolService.RegisterSms(t).subscribe(function(e){s.iserror=!1,s.responseStyle="success",s.responseTitle="SUCCESS!!!",s.display=!1},function(t){s.iserror=!0,s.responseTitle="Error!!!",s.responseDialog=!0,s.responseMesssage="",s.display=!1,s.responseStyle="error";for(var r=0,n=Object.entries(t);r<n.length;r++){var i=e(n[r],2),o=(i[0],i[1]);s.responseMesssage=s.responseMesssage+o}})}},{key:"vehicleSelectedData",value:function(){var t=this;this.multiplePoolAssignment.fleetManagerId=this.user.user.id,this.multiplePoolAssignment.requestID=this.requestId,this.selecteData.map(function(e){t.multiplePoolAssignment.bus.push({vehicleId:e.vehicleId})}),this.displayAccept=!1,this.poolService.RegisterRequestMultipleAssignment(this.multiplePoolAssignment).subscribe(function(e){t.iserror=!1,t.responseStyle="success",t.responseDialog=!0,t.responseTitle="SUCCESS!!!",t.responseMesssage="Request Assigned successfully ",t.display=!1,t.submitted=!1},function(s){t.iserror=!0,t.responseTitle="Error!!!",t.responseDialog=!0,t.responseMesssage="",t.display=!1,t.responseStyle="error";for(var r=0,n=Object.entries(s);r<n.length;r++){var i=e(n[r],2),o=(i[0],i[1]);t.responseMesssage=t.responseMesssage+o}t.submitted=!1})}},{key:"Okonclick",value:function(){this.responseDialog=!1,location.reload()}}])&&r(n.prototype,i),o&&r(n,o),t}(),re.\u0275fac=function(e){return new(e||re)(p.Y36(l.q),p.Y36(u.qu),p.Y36(d.m),p.Y36(g.sK),p.Y36(c.q))},re.\u0275cmp=p.Xpm({type:re,selectors:[["app-request"]],decls:88,vars:101,consts:[[3,"visible","modal","visibleChange"],["type","button","pButton","","icon","pi pi-check",3,"label","click"],[1,"p-grid"],[1,"p-col-5"],[1,"p-col-2"],[4,"ngIf"],["optionLabel","name","placeholder","New Request",3,"options","onChange","click"],[1,"p-col-1"],["styleClass","p-button-success","badgeClass","p-badge-danger",3,"label","click"],["styleClass","p-datatable-gridlines",3,"value","autoLayout","loading","paginator","rows","responsive"],["pTemplate","header"],["pTemplate","body"],[3,"header","visible","transitionOptions","modal","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","p-grid"],[1,"p-field","p-col-12","p-md-12"],[1,"p-field","p-col-6","p-md-6"],["class","p-col-6",4,"ngIf"],["type","text","formControlName","place","pInputText","","required",""],["severity","error","text","Going place is required",4,"ngIf"],["type","text","formControlName","requester","pInputText","","required",""],["severity","error","text","Requester Id is required",4,"ngIf"],["severity","error","text","Requester Id is not exists if not registered please first register",4,"ngIf"],[1,"p-field","p-col-12"],["for","address"],["type","text","rows","4","formControlName","reason","pInputTextarea","","required",""],[1,"p-col-5","p-lg-offset-2"],["pButton","","type","button",1,"ui-button-raised",2,"width","70%",3,"label","disabled","click"],["pButton","","type","button",1,"ui-button-raised",2,"width","70%",3,"label","click"],[3,"header","visible","modal","visibleChange"],[2,"text-align","right"],["pButton","","pRipple","","icon","pi pi-check","label","Assign",1,"p-button-success","p-mr-2",3,"disabled","click"],[3,"value","paginator","rows","responsive","selection","selectionChange"],[1,"p-field","p-col-6"],["pButton","","type","button",1,"ui-button-raised",3,"label","disabled","click"],["pButton","",1,"ui-button-raised",3,"label","click"],["styleClass","p-button-success","badgeClass","p-badge-danger",3,"label","badge","click"],["styleClass","p-button-warning","badgeClass","p-badge-danger",3,"label","badge","click"],["class","header-row",4,"ngIf"],[1,"header-row"],["colspan","11",2,"text-align","center","color","red"],[1,"body-row"],[4,"ngIf","ngIfElse"],["reject",""],["else1",""],["elseBlock",""],["appendTo","body",3,"popup","model"],["menu",""],["pButton","","icon","pi pi-list","type","button",3,"label","click"],["formControlName","tripDate","required","",3,"showIcon"],["severity","error","text","Trip Date is required",4,"ngIf"],["severity","error","text","Trip Date is required"],["formControlName","startTime","required","",3,"timeOnly"],["type","text","hidden","","formControlName","tripDate","required","",3,"ngModel","ngModelChange"],["type","date","formControlName","startTime","required","","pInputText",""],[1,"p-col-6"],["severity","error","text","Start Time is required",4,"ngIf"],["severity","error","text","Start Time is required"],["formControlName","endTime","required","",3,"timeOnly"],["type","date","formControlName","endTime","required","","pInputText",""],["severity","error","text","End Time is required",4,"ngIf"],["severity","error","text","End Time is required"],["severity","error","text","Going place is required"],["severity","error","text","Requester Id is required"],["severity","error","text","Requester Id is not exists if not registered please first register"],["colspan","5",2,"color","red","text-align","center"],[3,"value"],["type","button","pButton","","icon","pi pi-check",1,"p-button-success",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"p-dialog",0),p.NdJ("visibleChange",function(e){return t.responseDialog=e}),p.TgZ(1,"p-header"),p.TgZ(2,"p"),p._uU(3),p.qZA(),p.qZA(),p.TgZ(4,"p"),p._uU(5),p.qZA(),p.TgZ(6,"p-footer"),p.TgZ(7,"button",1),p.NdJ("click",function(){return t.Okonclick()}),p.ALo(8,"translate"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(9,"div",2),p.TgZ(10,"div",3),p._uU(11),p.ALo(12,"translate"),p.qZA(),p.TgZ(13,"div",4),p.YNc(14,x,3,4,"span",5),p.qZA(),p.TgZ(15,"div",4),p.YNc(16,w,3,4,"span",5),p.qZA(),p.TgZ(17,"div",4),p.TgZ(18,"div"),p.TgZ(19,"p-dropdown",6),p.NdJ("onChange",function(e){return t.requestTypeChage(e)})("click",function(e){return t.requestTypeChage(e)}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(20,"div",7),p.TgZ(21,"span"),p.TgZ(22,"p-button",8),p.NdJ("click",function(){return t.AllRequests()}),p.ALo(23,"translate"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(24,"p-table",9),p.YNc(25,D,2,2,"ng-template",10),p.YNc(26,O,22,14,"ng-template",11),p.qZA(),p.TgZ(27,"p-dialog",12),p.NdJ("visibleChange",function(e){return t.display=e}),p.ALo(28,"translate"),p.TgZ(29,"form",13),p.NdJ("ngSubmit",function(){return t.onClickRegisterRequest()}),p.TgZ(30,"div",14),p.TgZ(31,"div",15),p.YNc(32,Y,6,5,"span",5),p.qZA(),p.TgZ(33,"div",16),p.YNc(34,E,5,4,"span",5),p.YNc(35,P,6,4,"span",5),p.qZA(),p.YNc(36,F,2,1,"div",17),p.TgZ(37,"div",16),p.YNc(38,$,5,4,"span",5),p.YNc(39,H,5,3,"span",5),p.qZA(),p.YNc(40,G,2,1,"div",17),p.TgZ(41,"div",15),p.TgZ(42,"label"),p._uU(43),p.ALo(44,"translate"),p.qZA(),p._UZ(45,"input",18),p.YNc(46,z,1,0,"p-message",19),p.qZA(),p.TgZ(47,"div",15),p.TgZ(48,"label"),p._uU(49),p.ALo(50,"translate"),p.qZA(),p._UZ(51,"input",20),p.YNc(52,W,1,0,"p-message",21),p.YNc(53,K,1,0,"p-message",22),p.qZA(),p.TgZ(54,"div",23),p.TgZ(55,"label",24),p._uU(56),p.ALo(57,"translate"),p.qZA(),p._UZ(58,"textarea",25),p.qZA(),p.qZA(),p.TgZ(59,"div",2),p.TgZ(60,"div",26),p.TgZ(61,"button",27),p.NdJ("click",function(){return t.onClickRegisterRequest()}),p.ALo(62,"translate"),p.qZA(),p.qZA(),p.TgZ(63,"div",3),p.TgZ(64,"button",28),p.NdJ("click",function(){return t.display=!1}),p.ALo(65,"translate"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(66,"p-dialog",29),p.NdJ("visibleChange",function(e){return t.displayAccept=e}),p.ALo(67,"translate"),p.TgZ(68,"div",30),p.TgZ(69,"button",31),p.NdJ("click",function(){return t.vehicleSelectedData()}),p.qZA(),p.qZA(),p.TgZ(70,"p-table",32),p.NdJ("selectionChange",function(e){return t.selecteData=e}),p.YNc(71,te,2,2,"ng-template",10),p.YNc(72,se,13,5,"ng-template",11),p.qZA(),p.qZA(),p.TgZ(73,"p-dialog",12),p.NdJ("visibleChange",function(e){return t.rejectDisplay=e}),p.ALo(74,"translate"),p.TgZ(75,"form",13),p.NdJ("ngSubmit",function(){return t.onClickRejectRequest()}),p.TgZ(76,"div",14),p.TgZ(77,"div",23),p.TgZ(78,"label",24),p._uU(79),p.ALo(80,"translate"),p.qZA(),p._UZ(81,"textarea",25),p.qZA(),p.TgZ(82,"div",33),p.TgZ(83,"button",34),p.NdJ("click",function(){return t.onClickRejectRequest()}),p.ALo(84,"translate"),p.qZA(),p.qZA(),p.TgZ(85,"div",33),p.TgZ(86,"button",35),p.NdJ("click",function(){return t.rejectDisplay=!1}),p.ALo(87,"translate"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.Akn(p.DdM(97,ie)),p.Q6J("visible",t.responseDialog)("modal",!0),p.xp6(2),p.Tol(t.responseStyle),p.xp6(1),p.hij(" ",t.responseTitle," "),p.xp6(1),p.Tol(t.responseStyle),p.xp6(1),p.hij(" ",t.responseMesssage," "),p.xp6(2),p.s9C("label",p.lcZ(8,69,"ok")),p.xp6(4),p.hij(" ",p.lcZ(12,71,t.headerTitle),""),p.xp6(3),p.Q6J("ngIf","FleetManager"==t.userRole||"PoolServiceAdministrator"==t.userRole),p.xp6(2),p.Q6J("ngIf","FleetManager"==t.userRole||"PoolServiceAdministrator"==t.userRole),p.xp6(3),p.Q6J("options",t.requestTypeList),p.xp6(3),p.s9C("label",p.lcZ(23,73,"refresh")),p.xp6(2),p.Q6J("value",t.request)("autoLayout",!0)("loading",t.loading)("paginator",!0)("rows",5)("responsive",!0),p.xp6(3),p.Akn(p.DdM(98,oe)),p.s9C("header",p.lcZ(28,75,t.dialogTitle)),p.Q6J("visible",t.display)("transitionOptions","0ms")("modal",!0),p.xp6(2),p.Q6J("formGroup",t.userform),p.xp6(3),p.Q6J("ngIf","indoor"==t.requestType),p.xp6(2),p.Q6J("ngIf","indoor"==t.requestType),p.xp6(1),p.Q6J("ngIf","field"==t.requestType),p.xp6(1),p.Q6J("ngIf",t.userform.controls.startTime.errors&&t.userform.controls.startTime.dirty&&t.userform.controls.startTime.touched),p.xp6(2),p.Q6J("ngIf","indoor"==t.requestType),p.xp6(1),p.Q6J("ngIf","field"==t.requestType),p.xp6(1),p.Q6J("ngIf",t.userform.controls.endTime.errors&&t.userform.controls.endTime.dirty&&t.userform.controls.endTime.touched),p.xp6(3),p.hij(" ",p.lcZ(44,77,"place"),""),p.xp6(3),p.Q6J("ngIf",!t.userform.controls.place.valid&&t.userform.controls.place.dirty),p.xp6(3),p.hij(" ",p.lcZ(50,79,"passengerId"),""),p.xp6(3),p.Q6J("ngIf",t.userform.controls.requester.touched&&(null==t.userform.controls.requester.errors?null:t.userform.controls.requester.errors.required)),p.xp6(1),p.Q6J("ngIf",t.userform.controls.requester.touched&&(null==t.userform.controls.requester.errors?null:t.userform.controls.requester.errors.userNameNotAvailable)),p.xp6(3),p.Oqu(p.lcZ(57,81,"reason")),p.xp6(5),p.s9C("label",p.lcZ(62,83,"save")),p.Q6J("disabled",!t.userform.valid||t.submitted),p.xp6(3),p.s9C("label",p.lcZ(65,85,"cancel")),p.xp6(2),p.Akn(p.DdM(99,ie)),p.s9C("header",p.lcZ(67,87,"selectVehicleandAssign")),p.Q6J("visible",t.displayAccept)("modal",!0),p.xp6(3),p.Q6J("disabled",!t.selecteData||!t.selecteData.length),p.xp6(1),p.Q6J("value",t.vehicle)("paginator",!0)("rows",5)("responsive",!0)("selection",t.selecteData),p.xp6(3),p.Akn(p.DdM(100,ae)),p.s9C("header",p.lcZ(74,89,t.rejectDialogTitle)),p.Q6J("visible",t.rejectDisplay)("transitionOptions","0ms")("modal",!0),p.xp6(2),p.Q6J("formGroup",t.rejectform),p.xp6(4),p.Oqu(p.lcZ(80,91,"reason")),p.xp6(4),p.s9C("label",p.lcZ(84,93,"register")),p.Q6J("disabled",!t.rejectform.valid||t.rejectsubmitted),p.xp6(3),p.s9C("label",p.lcZ(87,95,"cancel")))},directives:[h.V,f.h4,f.$_,q.Hq,o.O5,m.Lt,q.zx,Z.iA,f.jx,u.vK,u.JL,u.sg,u.Fj,u.JJ,u.u,v.o,u.Q7,A.g,y.v2,T.f,b.q,Z.Mo,Z.UA],pipes:[g.X$,o.uU],styles:[""]}),re)}],le=function(){var e=function e(){s(this,e)};return e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({factory:function(t){return new(t||e)},imports:[[a.Bz.forChild(ue)],a.Bz]}),e}(),ce=i(35119),pe=((ne=function e(){s(this,e)}).\u0275mod=p.oAB({type:ne}),ne.\u0275inj=p.cJS({factory:function(e){return new(e||ne)},imports:[[o.ez,le,ce.n]]}),ne)}}])}();