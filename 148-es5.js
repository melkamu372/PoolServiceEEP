!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,s,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(a){u=!0,s=a}finally{try{o||null==n.return||n.return()}finally{if(u)throw s}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(self.webpackChunknote=self.webpackChunknote||[]).push([[148],{81148:function(t,s,i){"use strict";i.r(s),i.d(s,{RequestAssignmentModule:function(){return _}});var o=i(61116),u=i(14969),a=i(8361),l=i(74847),c=i(35366),p=i(77744),g=i(89521),h=i(65916),d=i(28451),f=i(94217),q=i(49783),Z=i(28302);function y(e,t){1&e&&(c.TgZ(0,"tr",10),c.TgZ(1,"th",11),c._UZ(2,"p-tableHeaderCheckbox"),c.qZA(),c.TgZ(3,"th"),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.TgZ(6,"th"),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.TgZ(9,"th"),c._uU(10),c.ALo(11,"translate"),c.qZA(),c.TgZ(12,"th"),c._uU(13),c.ALo(14,"translate"),c.qZA(),c.TgZ(15,"th"),c._uU(16),c.ALo(17,"translate"),c.qZA(),c.TgZ(18,"th"),c._uU(19),c.ALo(20,"translate"),c.qZA(),c.TgZ(21,"th"),c._uU(22),c.ALo(23,"translate"),c.qZA(),c.TgZ(24,"th"),c._uU(25),c.ALo(26,"translate"),c.qZA(),c.TgZ(27,"th"),c._uU(28),c.ALo(29,"translate"),c.qZA(),c.TgZ(30,"th"),c._uU(31,"SMS"),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Oqu(c.lcZ(5,9,"requester")),c.xp6(3),c.Oqu(c.lcZ(8,11,"reason")),c.xp6(3),c.Oqu(c.lcZ(11,13,"goto")),c.xp6(3),c.Oqu(c.lcZ(14,15,"requestType")),c.xp6(3),c.Oqu(c.lcZ(17,17,"requestTime")),c.xp6(3),c.Oqu(c.lcZ(20,19,"durationTime")),c.xp6(3),c.Oqu(c.lcZ(23,21,"vehicle")),c.xp6(3),c.Oqu(c.lcZ(26,23,"driver")),c.xp6(3),c.Oqu(c.lcZ(29,25,"print")))}function A(e,t){1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"th",12),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.hij(" ",c.lcZ(3,1,"noActiveAcceptedPoolRequest")," "))}function m(e,t){if(1&e&&(c.YNc(0,y,32,27,"tr",8),c.YNc(1,A,4,3,"tr",9)),2&e){var n=c.oxw();c.Q6J("ngIf",0!=n.requestAssignment.length),c.xp6(1),c.Q6J("ngIf",0==n.requestAssignment.length)}}function v(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"date"),c.ALo(3,"date"),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(1),c.AsE(" ",c.xi3(2,2,n.requester.starttime,"MMM,dd/yyyy :hh:mm:a")," To ",c.xi3(3,5,n.requester.endtime,"MMM,dd/yyyy:hh:mm:a")," ")}}function b(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"date"),c.ALo(3,"date"),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(1),c.AsE(" ",c.xi3(2,2,n.requester.starttime,"MMM,dd/yyyy")," To ",c.xi3(3,5,n.requester.endtime,"MMM,dd/yyyy")," ")}}function T(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"tr",13),c.TgZ(1,"td"),c._UZ(2,"p-tableCheckbox",14),c.qZA(),c.TgZ(3,"td"),c._uU(4),c._UZ(5,"br"),c._uU(6),c._UZ(7,"br"),c.qZA(),c.TgZ(8,"td"),c._uU(9),c.qZA(),c.TgZ(10,"td"),c._uU(11),c.qZA(),c.TgZ(12,"td"),c._uU(13),c.qZA(),c.TgZ(14,"td"),c._uU(15),c.ALo(16,"date"),c.qZA(),c.TgZ(17,"td"),c.YNc(18,v,4,8,"span",9),c.YNc(19,b,4,8,"span",9),c.qZA(),c.TgZ(20,"td"),c._uU(21),c.qZA(),c.TgZ(22,"td"),c._uU(23),c._UZ(24,"br"),c._uU(25),c.qZA(),c.TgZ(26,"td"),c.TgZ(27,"button",15),c.NdJ("click",function(){c.CHM(n);var e=t.$implicit;return c.oxw().printData(e)}),c.qZA(),c.qZA(),c.TgZ(28,"td"),c.TgZ(29,"button",16),c.NdJ("click",function(){c.CHM(n);var e=t.$implicit;return c.oxw().SendSmsData(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var r=t.$implicit;c.xp6(2),c.Q6J("value",r),c.xp6(2),c.AsE("",r.requester.requester.firstName," ",r.requester.requester.lastName,""),c.xp6(2),c.hij(" ",r.requester.requester.phoneNumber," "),c.xp6(3),c.Oqu(r.requester.reason),c.xp6(2),c.Oqu(r.requester.goto),c.xp6(2),c.Oqu(r.requester.requesttype),c.xp6(2),c.hij(" ",c.xi3(16,13,r.requester.requesteddate,"MMM,dd/yyyy")," "),c.xp6(3),c.Q6J("ngIf","indoor"==r.requester.requesttype),c.xp6(1),c.Q6J("ngIf","field"==r.requester.requesttype),c.xp6(2),c.hij(" ",r.vehicles.platenumber," "),c.xp6(2),c.hij("",r.vehicles.driverName," "),c.xp6(2),c.hij(" ",r.vehicles.driverPhone," ")}}var x,S,M=function(){return{width:"50vw"}},U=[{path:"",component:(x=function(){function t(e,r,s,i){n(this,t),this.poolService=e,this.sessionService=r,this.supportMethod=s,this.printService=i,this.iserror=!1,this.responseTitle="",this.responseDialog=!1,this.responseMesssage="",this.responseStyle="",this.SmsContent={requestID:"",phone:"",body:"",status:"0"}}var s,i,o;return s=t,(i=[{key:"ngOnInit",value:function(){this.user=this.sessionService.getItem("currentUser"),this.userRole=this.supportMethod.getUserRole(this.user),this.loading=!1,this.getRouteAssignment()}},{key:"getRouteAssignment",value:function(){var e=this;this.loading=!0,this.poolService.getRequestAssignment().then(function(t){e.requestAssignment="FleetManager"==e.userRole?t:t.filter(function(t){return t.requester.requester.id==e.user.user.id}),e.loading=!1})}},{key:"printSelectedData",value:function(){this.printService.generateMultiplePassengerTicketPDF(this.selecteData)}},{key:"printData",value:function(e){this.printService.generateSinglePassengerTicketPDF(e)}},{key:"SendSmsData",value:function(t){return n=this,s=regeneratorRuntime.mark(function n(){var r,s=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r={requestID:this.user.user.id,phone:"",body:"",status:"0"},this.SmsContent.requestID=this.user.user.id,this.SmsContent.phone=t.requester.requester.phoneNumber,this.SmsContent.body="\u12e8\u1351\u120d \u1230\u122d\u126a\u1235 \u1325\u12eb\u1244\u12ce \u12c8\u12f0 ".concat(t.requester.goto," \u1270\u1240\u1265\u1208\u1290\u12ce\u1273\u120d \u12e8\u1270\u1218\u12f0\u1260\u12c9 \u1230\u122d\u126a\u1235"),r.phone=t.vehicles.driverPhone,r.body="\u12e8\u1351\u120d \u1230\u122d\u126a\u1235 \u12a5\u1295\u12f2\u1230\u1321\u120d\u1295\u1361\u1361 \u12e8\u1270\u1348\u1240\u12f0\u1208\u1275 \u1230\u122b\u1270\u129b ".concat(t.requester.requester.firstName),n.next=8,this.poolService.RegisterSms(this.SmsContent).subscribe(function(e){s.iserror=!1,s.responseStyle="success",s.responseMesssage="Message is sent successfully",s.responseTitle="SUCCESS!!!",s.display=!1},function(t){s.iserror=!0,s.responseTitle="Error!!!",s.responseDialog=!0,s.responseMesssage="",s.display=!1,s.responseStyle="error";for(var n=0,r=Object.entries(t);n<r.length;n++){var i=e(r[n],2),o=(i[0],i[1]);s.responseMesssage=s.responseMesssage+o}});case 8:return n.next=10,this.SendSmsFunction(r);case 10:case"end":return n.stop()}},n,this)}),new((r=void 0)||(r=Promise))(function(e,t){function i(e){try{u(s.next(e))}catch(n){t(n)}}function o(e){try{u(s.throw(e))}catch(n){t(n)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(i,o)}u((s=s.apply(n,[])).next())});var n,r,s}},{key:"SendSmsFunction",value:function(t){var n=this;this.poolService.RegisterSms(t).subscribe(function(e){n.iserror=!1,n.responseStyle="success",n.responseDialog=!0,n.responseMesssage="Message is sent successfully",n.responseTitle="SUCCESS!!!",n.display=!1},function(t){n.iserror=!0,n.responseTitle="Error!!!",n.responseDialog=!0,n.responseMesssage="",n.display=!1,n.responseStyle="error";for(var r=0,s=Object.entries(t);r<s.length;r++){var i=e(s[r],2),o=(i[0],i[1]);n.responseMesssage=n.responseMesssage+o}})}},{key:"Okonclick",value:function(){this.responseDialog=!1,location.reload()}}])&&r(s.prototype,i),o&&r(s,o),t}(),x.\u0275fac=function(e){return new(e||x)(c.Y36(a.q),c.Y36(p.m),c.Y36(g.p),c.Y36(l.p))},x.\u0275cmp=c.Xpm({type:x,selectors:[["app-request-assignment"]],decls:15,vars:21,consts:[[3,"visible","modal","visibleChange"],["type","button","pButton","","icon","pi pi-check",3,"label","click"],[2,"text-align","right"],["pButton","","pRipple","","icon","pi pi-file-pdf","label","Print",1,"p-button-warning","p-mr-2",3,"disabled","click"],["styleClass","p-datatable-gridlines",3,"value","autoLayout","loading","selection","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["class","header-row",4,"ngIf"],[4,"ngIf"],[1,"header-row"],[2,"width","3rem"],["colspan","11",2,"text-align","center","color","red"],[1,"body-row"],[3,"value"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","Print","tooltipPosition","bottom",1,"p-button-warning","p-mr-2",3,"click"],["type","button","pButton","","label","Send",1,"p-button-success",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"p-dialog",0),c.NdJ("visibleChange",function(e){return t.responseDialog=e}),c.TgZ(1,"p-header"),c.TgZ(2,"p"),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"p"),c._uU(5),c.qZA(),c.TgZ(6,"p-footer"),c.TgZ(7,"button",1),c.NdJ("click",function(){return t.Okonclick()}),c.ALo(8,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",2),c.TgZ(10,"button",3),c.NdJ("click",function(){return t.printSelectedData()}),c.qZA(),c.qZA(),c.TgZ(11,"p-table",4,5),c.NdJ("selectionChange",function(e){return t.selecteData=e}),c.YNc(13,m,2,2,"ng-template",6),c.YNc(14,T,30,16,"ng-template",7),c.qZA()),2&e&&(c.Akn(c.DdM(20,M)),c.Q6J("visible",t.responseDialog)("modal",!0),c.xp6(2),c.Tol(t.responseStyle),c.xp6(1),c.hij(" ",t.responseTitle," "),c.xp6(1),c.Tol(t.responseStyle),c.xp6(1),c.hij(" ",t.responseMesssage," "),c.xp6(2),c.s9C("label",c.lcZ(8,18,"ok")),c.xp6(3),c.Q6J("disabled",!t.selecteData||!t.selecteData.length),c.xp6(1),c.Q6J("value",t.requestAssignment)("autoLayout",!0)("loading",t.loading)("selection",t.selecteData))},directives:[h.V,d.h4,d.$_,f.Hq,q.iA,d.jx,o.O5,q.Mo,q.UA],pipes:[Z.X$,o.uU],styles:[""]}),x)}],k=function(){var e=function e(){n(this,e)};return e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({factory:function(t){return new(t||e)},imports:[[u.Bz.forChild(U)],u.Bz]}),e}(),w=i(35119),_=((S=function e(){n(this,e)}).\u0275mod=c.oAB({type:S}),S.\u0275inj=c.cJS({factory:function(e){return new(e||S)},imports:[[o.ez,k,w.n]]}),S)}}])}();