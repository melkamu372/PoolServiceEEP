!function(){function e(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==i)return;var o,r,n=[],s=!0,u=!1;try{for(i=i.call(e);!(s=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);s=!0);}catch(l){u=!0,r=l}finally{try{s||null==i.return||i.return()}finally{if(u)throw r}}return n}(e,i)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(e,i)}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(self.webpackChunknote=self.webpackChunknote||[]).push([[514],{79514:function(t,r,n){"use strict";n.r(r),n.d(r,{HomeServiceModule:function(){return k}});var s=n(61116),u=n(14969),l=n(8361),a=n(35366),c=n(77744),h=n(89521),p=n(65916),g=n(28451),d=n(94217),Z=n(49783),m=n(28302);function v(e,t){1&e&&(a.TgZ(0,"tr",11),a.TgZ(1,"th"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"th"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.TgZ(7,"th"),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.TgZ(10,"th"),a._uU(11),a.ALo(12,"translate"),a.qZA(),a.TgZ(13,"th"),a._uU(14),a.ALo(15,"translate"),a.qZA(),a.TgZ(16,"th"),a._uU(17),a.ALo(18,"translate"),a.qZA(),a.TgZ(19,"th"),a._uU(20),a.ALo(21,"translate"),a.qZA(),a.TgZ(22,"th"),a._uU(23),a.ALo(24,"translate"),a.qZA(),a.qZA()),2&e&&(a.xp6(2),a.Oqu(a.lcZ(3,8,"name")),a.xp6(3),a.Oqu(a.lcZ(6,10,"vehicle")),a.xp6(3),a.Oqu(a.lcZ(9,12,"plateNumber")),a.xp6(3),a.Oqu(a.lcZ(12,14,"driver")),a.xp6(3),a.Oqu(a.lcZ(15,16,"phone")),a.xp6(3),a.Oqu(a.lcZ(18,18,"line")),a.xp6(3),a.Oqu(a.lcZ(21,20,"way")),a.xp6(3),a.Oqu(a.lcZ(24,22,"assignDate")))}function A(e,t){1&e&&(a.TgZ(0,"tr"),a.TgZ(1,"th",12),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.qZA()),2&e&&(a.xp6(2),a.Oqu(a.lcZ(3,1,"noHomeServiceUser")))}function f(e,t){if(1&e&&(a.YNc(0,v,25,24,"tr",9),a.YNc(1,A,4,3,"tr",10)),2&e){var i=a.oxw();a.Q6J("ngIf",0!=i.homeService.length),a.xp6(1),a.Q6J("ngIf",0==i.homeService.length)}}function q(e,t){if(1&e&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a._UZ(5,"br"),a.qZA(),a.TgZ(6,"td"),a._uU(7),a._UZ(8,"br"),a.qZA(),a.TgZ(9,"td"),a._uU(10),a.qZA(),a.TgZ(11,"td"),a._uU(12),a.qZA(),a.TgZ(13,"td"),a._uU(14),a.qZA(),a.TgZ(15,"td"),a._uU(16),a.qZA(),a.TgZ(17,"td"),a._uU(18),a.ALo(19,"date"),a.qZA(),a.qZA()),2&e){var i=t.$implicit;a.xp6(2),a.AsE("",i.homePoolRequeste.requester.firstName," ",i.homePoolRequeste.requester.lastName,""),a.xp6(2),a.hij(" ",i.route.bus.name," "),a.xp6(3),a.hij(" ",i.route.bus.platenumber,""),a.xp6(3),a.hij(" ",i.route.bus.driverName," "),a.xp6(2),a.hij(" ",i.route.bus.driverPhone," "),a.xp6(2),a.AsE("",i.route.route.departure," To ",i.route.route.destination,""),a.xp6(2),a.Oqu(i.route.route.way),a.xp6(2),a.Oqu(a.xi3(19,10,i.assignDate,"MMM,dd/yyyy"))}}function y(e,t){1&e&&(a.TgZ(0,"tr"),a.TgZ(1,"th"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"th"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.TgZ(7,"th"),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.TgZ(10,"th"),a._uU(11),a.ALo(12,"translate"),a.qZA(),a.TgZ(13,"th"),a._uU(14),a.ALo(15,"translate"),a.qZA(),a.qZA()),2&e&&(a.xp6(2),a.hij("",a.lcZ(3,5,"name")," "),a.xp6(3),a.Oqu(a.lcZ(6,7,"model")),a.xp6(3),a.hij("",a.lcZ(9,9,"plateNumber")," "),a.xp6(3),a.Oqu(a.lcZ(12,11,"seatCapacity")),a.xp6(3),a.hij(" ",a.lcZ(15,13,"assign"),""))}function T(e,t){if(1&e){var i=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td"),a.TgZ(10,"button",13),a.NdJ("click",function(){a.CHM(i);var e=t.$implicit;return a.oxw().selectVehicle(e)}),a.qZA(),a.qZA(),a.qZA()}if(2&e){var o=t.$implicit;a.xp6(2),a.Oqu(o.bus.name),a.xp6(2),a.Oqu(o.bus.model),a.xp6(2),a.Oqu(o.bus.platenumber),a.xp6(2),a.hij("",o.bus.seatCapacity," ")}}var S,b,x=function(){return{width:"50vw"}},U=[{path:"",component:(S=function(){function t(e,o,r){i(this,t),this.poolService=e,this.sessionService=o,this.supportMethod=r,this.homeService=[],this.homeServiceSize=0,this.homeServiceRequestSize=0,this.HomePoolRCount=0,this.headerTitle="",this.newHomePool={routeId:"",userId:"string",assigndate:new Date,assignby:"",isActive:!0,reqid:""},this.submitted=!1,this.iserror=!1,this.responseTitle="",this.responseDialog=!1,this.responseMesssage="",this.responseStyle="",this.isHomeService=0}var r,n,s;return r=t,(n=[{key:"ngOnInit",value:function(){this.user=this.sessionService.getItem("currentUser"),this.userRole=this.supportMethod.getUserRole(this.user),this.CountActiveHomePoolRequest(),this.loading=!1,this.displayAccept=!1,this.getHomeService(),this.headerTitle="Home Pool Service Assignment List","FleetManager"==this.userRole?this.getHomeService():this.getHomeServiceByUser()}},{key:"getHomeService",value:function(){var e=this;this.loading=!0,this.poolService.getHomeService().then(function(t){e.homeService=t,e.loading=!1})}},{key:"getHomeServiceByUser",value:function(){var e=this;this.loading=!0,this.poolService.getHomeService().then(function(t){e.homeService=t.filter(function(t){return t.homePoolRequeste.requester.department.departmentId==e.user.user.department.departmentId}),e.loading=!1})}},{key:"CountActiveHomePoolRequest",value:function(){var e=this;this.loading=!0,this.poolService.countActiveHomePoolRequest().then(function(t){e.HomePoolRCount=t})}},{key:"getHomePoolRequest",value:function(){var e=this;this.loading=!0,this.poolService.getHomePoolRequest().then(function(t){e.homeServiceRequest=t,e.homeServiceRequestSize=t.length,e.loading=!1})}},{key:"HomerePollrequests",value:function(){this.headerTitle="Requests For Home Pool Service",this.homeServiceSize=0,this.getHomePoolRequest()}},{key:"HomePoolList",value:function(){this.headerTitle="Home Pool Service Assignment List",this.homeServiceRequestSize=0,this.getHomeService()}},{key:"getVehicle",value:function(){var e=this;this.poolService.getBusRouteAssignment().then(function(t){e.vehicle=t,e.loading=!1})}},{key:"getSelectedRequest",value:function(e){this.displayAccept=!0,this.SelectedUserId=e.user.id,this.requestID=e.id,this.getVehicle()}},{key:"selectVehicle",value:function(t){var i=this;this.displayAccept=!1,this.newHomePool.routeId=t.id,this.newHomePool.userId=this.SelectedUserId,this.newHomePool.assignby=this.user.user.userName,this.newHomePool.reqid=this.requestID,this.poolService.RegisterHomeService(this.newHomePool).subscribe(function(e){i.iserror=!1,i.responseStyle="success",i.responseDialog=!0,i.responseTitle="SUCCESS!!!",i.responseMesssage="Assigned successfully ",i.displayAccept=!1,i.submitted=!1},function(t){i.iserror=!0,i.responseTitle="Error!!!",i.responseDialog=!0,i.responseMesssage="",i.displayAccept=!1,i.responseStyle="error";for(var o=0,r=Object.entries(t);o<r.length;o++){var n=e(r[o],2),s=(n[0],n[1]);i.responseMesssage=i.responseMesssage+s}i.submitted=!1})}},{key:"Okonclick",value:function(){this.responseDialog=!1,location.reload()}}])&&o(r.prototype,n),s&&o(r,s),t}(),S.\u0275fac=function(e){return new(e||S)(a.Y36(l.q),a.Y36(c.m),a.Y36(h.p))},S.\u0275cmp=a.Xpm({type:S,selectors:[["app-home-service"]],decls:21,vars:34,consts:[[3,"visible","modal","visibleChange"],["type","button","pButton","","icon","pi pi-check",3,"label","click"],[1,"p-grid"],[1,"p-col-7"],[3,"value","autoLayout","loading"],["pTemplate","header"],["pTemplate","body"],[3,"header","visible","modal","visibleChange"],[3,"value","paginator","rows","responsive"],["class","header-row",4,"ngIf"],[4,"ngIf"],[1,"header-row"],["colspan","5",2,"color","red","text-align","center"],["type","button","pButton","","icon","pi pi-check",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"p-dialog",0),a.NdJ("visibleChange",function(e){return t.responseDialog=e}),a.TgZ(1,"p-header"),a.TgZ(2,"p"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"p"),a._uU(5),a.qZA(),a.TgZ(6,"p-footer"),a.TgZ(7,"button",1),a.NdJ("click",function(){return t.Okonclick()}),a.ALo(8,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"div",2),a.TgZ(10,"div",3),a._uU(11),a.ALo(12,"translate"),a.qZA(),a.qZA(),a.TgZ(13,"p-table",4),a.YNc(14,f,2,2,"ng-template",5),a.YNc(15,q,20,13,"ng-template",6),a.qZA(),a.TgZ(16,"p-dialog",7),a.NdJ("visibleChange",function(e){return t.displayAccept=e}),a.ALo(17,"translate"),a.TgZ(18,"p-table",8),a.YNc(19,y,16,15,"ng-template",5),a.YNc(20,T,11,4,"ng-template",6),a.qZA(),a.qZA()),2&e&&(a.Akn(a.DdM(32,x)),a.Q6J("visible",t.responseDialog)("modal",!0),a.xp6(2),a.Tol(t.responseStyle),a.xp6(1),a.hij(" ",t.responseTitle," "),a.xp6(1),a.Tol(t.responseStyle),a.xp6(1),a.hij(" ",t.responseMesssage," "),a.xp6(2),a.s9C("label",a.lcZ(8,26,"ok")),a.xp6(4),a.hij(" ",a.lcZ(12,28,t.headerTitle),""),a.xp6(2),a.Q6J("value",t.homeService)("autoLayout",!0)("loading",t.loading),a.xp6(3),a.Akn(a.DdM(33,x)),a.s9C("header",a.lcZ(17,30,"selectVehicleandAssign")),a.Q6J("visible",t.displayAccept)("modal",!0),a.xp6(2),a.Q6J("value",t.vehicle)("paginator",!0)("rows",5)("responsive",!0))},directives:[p.V,g.h4,g.$_,d.Hq,Z.iA,g.jx,s.O5],pipes:[m.X$,s.uU],styles:[""]}),S)}],H=function(){var e=function e(){i(this,e)};return e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({factory:function(t){return new(t||e)},imports:[[u.Bz.forChild(U)],u.Bz]}),e}(),_=n(35119),k=((b=function e(){i(this,e)}).\u0275mod=a.oAB({type:b}),b.\u0275inj=a.cJS({factory:function(e){return new(e||b)},imports:[[s.ez,H,_.n]]}),b)}}])}();